<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá sinh th√°i ƒë·ªãnh h∆∞·ªõng ngh·ªÅ nghi·ªáp</title>
    <!-- T·∫£i Tailwind CSS ƒë·ªÉ t·∫°o giao di·ªán nhanh ch√≥ng -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        /* ƒê·ªãnh nghƒ©a m√†u s·∫Øc DISC trong CSS ƒë·ªÉ d·ªÖ t√°i s·ª≠ d·ª•ng v·ªõi Tailwind */
        :root {
            --tw-disc-d: #ef4444; /* red-500 */
            --tw-disc-i: #3b82f6; /* blue-500 */
            --tw-disc-s: #10b981; /* green-500 */
            --tw-disc-c: #f59e0b; /* amber-500 */
            /* M√†u Holland */
            --tw-holland-r: #b91c1c; /* red-700 */
            --tw-holland-i: #3b82f6; /* blue-500 */
            --tw-holland-a: #a855f7; /* purple-500 */
            --tw-holland-s: #10b981; /* green-500 */
            --tw-holland-e: #f97316; /* orange-500 */
            --tw-holland-c: #4b5563; /* gray-600 */
            /* M√†u MBTI */
            --tw-mbti-e: #fcd34d; /* amber-300 */
            --tw-mbti-i: #34d399; /* emerald-400 */
            --tw-mbti-s: #60a5fa; /* blue-400 */
            --tw-mbti-n: #a78bfa; /* violet-400 */
            --tw-mbti-t: #f87171; /* red-400 */
            --tw-mbti-f: #f472b6; /* pink-400 */
            --tw-mbti-j: #3b82f6; /* blue-500 */
            --tw-mbti-p: #f59e0b; /* amber-500 */
        }
        .text-disc-d { color: var(--tw-disc-d); }
        .text-disc-i { color: var(--tw-disc-i); }
        .text-disc-s { color: var(--tw-disc-s); }
        .text-disc-c { color: var(--tw-disc-c); }
        .bg-disc-d { background-color: var(--tw-disc-d); }

        /* ·∫®n c√°c trang ban ƒë·∫ßu */
        .page-content {
            display: none;
        }
        .message-bubble {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 20px;
            margin-bottom: 10px;
            word-wrap: break-word;
        }
        .user-message {
            background-color: #3b82f6;
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }
        .ai-message {
            background-color: #e5e7eb;
            color: #1f2937;
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }
        .page-bg-gradient {
            background: linear-gradient(135deg, #e0f2fe 0%, #d1fae5 100%);
        }
        .chat-container {
            height: calc(100vh - 200px);
            min-height: 500px;
        }
        /* Style cho Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
            padding-top: 60px;
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .close-btn {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            transition: color 0.2s;
        }
        .close-btn:hover,
        .close-btn:focus {
            color: #333;
            text-decoration: none;
            cursor: pointer;
        }
        /* Typing indicator styles */
        .typing-indicator span {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #9ca3af;
            animation: bounce 1.4s infinite ease-in-out both;
        }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1.0); }
        }

        /* --- STYLES FOR EXAM LIBRARY (THI TH·ª¨) --- */
        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .input-score {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            background-color: #f9fafb;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .input-score:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.25);
        }
        .btn-test-hub {
            font-weight: 700;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            transition: all 0.3s;
            color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transform: translateY(0);
        }
        .btn-test-hub:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        .btn-indigo { background-color: #4f46e5; }
        .btn-indigo:hover { background-color: #4338ca; }
        .btn-blue { background-color: #2563eb; }
        .btn-blue:hover { background-color: #1d4ed8; }
        .btn-green { background-color: #16a34a; }
        .btn-green:hover { background-color: #15803d; }


        @media (max-width: 640px) {
            .modal-content {
                margin: 20px auto;
                width: 95%;
            }
            .chat-container {
                 min-height: 400px;
            }
        }
        
        /* Transition cho thanh ti·∫øn tr√¨nh k·∫øt qu·∫£ */
        .progress-bar-transition {
            transition: width 1s ease-out;
        }
    
  /* ·∫®n li√™n k·∫øt Ki·ªÉm tra API Gemini tr√™n m·ªçi thi·∫øt b·ªã */
  a[onclick*="api-test"] {
    display: none !important;
  }

</style>
</head>
<body class="flex flex-col min-h-screen">
    <!-- Thanh ƒëi·ªÅu h∆∞·ªõng -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-6 py-3 flex justify-between items-center flex-wrap">
            <a href="#" class="text-2xl font-bold text-gray-800" onclick="showPage('home')">
                <span class="text-indigo-600">H∆∞·ªõng</span>Nghi·ªáp
            </a>
            <!-- Menu cho Desktop -->
            <div class="hidden md:flex space-x-4">
                <a href="#" class="text-gray-800 hover:text-indigo-600 font-medium transition duration-150" onclick="showPage('home')">Trang ch·ªß</a>
                <!-- Updated to quiz-hub -->
                <a href="#" class="text-gray-800 hover:text-indigo-600 font-medium transition duration-150" onclick="showPage('quiz-hub')">Tr·∫Øc nghi·ªám</a>
                <a href="#" class="text-gray-800 hover:text-indigo-600 font-medium transition duration-150" onclick="showPage('search')">Tra c·ª©u AI</a>
                <a href="#" class="text-gray-800 hover:text-indigo-600 font-medium transition duration-150" onclick="showPage('advice')">T√¢m s·ª± & L·ªùi khuy√™n</a>
                <a href="#" class="text-gray-800 hover:text-indigo-600 font-medium transition duration-150" onclick="showPage('inspo')">Truy·ªÅn c·∫£m h·ª©ng</a>
                <a href="#" class="text-gray-800 hover:text-indigo-600 font-medium transition duration-150" onclick="showPage('survey')">G√≥p √Ω & Kh·∫£o s√°t</a>
                <a href="#" class="text-gray-800 hover:text-indigo-600 font-medium transition duration-150" onclick="showPage('admissions')">Tuy·ªÉn sinh</a>
                <a href="#" class="text-gray-800 hover:text-indigo-600 font-medium transition duration-150" onclick="showPage('social-media')">C·ªông ƒë·ªìng</a>
                <!-- NEW API Test Link -->
                <a href="#" class="text-gray-800 hover:text-purple-600 font-medium transition duration-150" onclick="showPage('api-test')">Ki·ªÉm tra API Gemini</a>
            </div>
              <!-- Menu cho Mobile (ƒë∆°n gi·∫£n h√≥a) -->
              <div id="mobile-menu-btn" class="md:hidden text-gray-800 cursor-pointer text-xl" onclick="toggleMobileMenu()">‚ò∞</div>
        </div>
        <!-- Menu Mobile m·ªü r·ªông -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-3 space-y-2 bg-gray-50 border-t border-gray-200">
            <a href="#" class="block text-gray-800 hover:text-indigo-600 font-medium transition duration-150 py-1" onclick="showPage('home'); toggleMobileMenu();">Trang ch·ªß</a>
            <!-- Updated to quiz-hub -->
            <a href="#" class="block text-gray-800 hover:text-indigo-600 font-medium transition duration-150 py-1" onclick="showPage('quiz-hub'); toggleMobileMenu();">Tr·∫Øc nghi·ªám</a>
            <a href="#" class="block text-gray-800 hover:text-indigo-600 font-medium transition duration-150 py-1" onclick="showPage('search'); toggleMobileMenu();">Tra c·ª©u AI</a>
            <a href="#" class="block text-gray-800 hover:text-indigo-600 font-medium transition duration-150 py-1" onclick="showPage('advice'); toggleMobileMenu();">T√¢m s·ª± & L·ªùi khuy√™n</a>
            <a href="#" class="block text-gray-800 hover:text-indigo-600 font-medium transition duration-150 py-1" onclick="showPage('inspo'); toggleMobileMenu();">Truy·ªÅn c·∫£m h·ª©ng</a>
            <a href="#" class="block text-gray-800 hover:text-indigo-600 font-medium transition duration-150 py-1" onclick="showPage('survey'); toggleMobileMenu();">G√≥p √Ω & Kh·∫£o s√°t</a>
            <a href="#" class="block text-gray-800 hover:text-indigo-600 font-medium transition duration-150 py-1" onclick="showPage('admissions'); toggleMobileMenu();">Tuy·ªÉn sinh</a>
            <a href="#" class="block text-gray-800 hover:text-indigo-600 font-medium transition duration-150 py-1" onclick="showPage('social-media'); toggleMobileMenu();">C·ªông ƒë·ªìng</a>
            <!-- NEW API Test Link -->
            <a href="#" class="block text-gray-800 hover:text-purple-600 font-medium transition duration-150 py-1" onclick="showPage('api-test'); toggleMobileMenu();">Ki·ªÉm tra API Gemini</a>
        </div>
    </nav>

    <!-- C√°c trang n·ªôi dung -->
    <main class="flex-grow container mx-auto px-6 py-12">
        <!-- Trang ch·ªß -->
        <section id="home-page" class="page-content">
            <section class="text-center py-20 page-bg-gradient rounded-3xl shadow-xl">
                <h1 class="text-5xl font-extrabold text-gray-900 mb-4">
                    T√¨m ki·∫øm con ƒë∆∞·ªùng s·ª± nghi·ªáp c·ªßa b·∫°n
                </h1>
                <p class="text-xl text-gray-600 mb-8 max-w-2xl mx-auto">
                    Kh√°m ph√° b·∫£n th√¢n, ƒë·ªãnh h∆∞·ªõng t∆∞∆°ng lai v√† l·ª±a ch·ªçn ng√†nh ngh·ªÅ ph√π h·ª£p nh·∫•t v·ªõi nƒÉng l·ª±c v√† s·ªü th√≠ch c·ªßa b·∫°n.
                </p>
                <div class="flex justify-center space-x-4">
                    <!-- Updated to quiz-hub -->
                    <button class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-indigo-700 transition duration-300 transform hover:scale-105" onclick="showPage('quiz-hub')">
                        B·∫Øt ƒë·∫ßu ngay
                    </button>
                </div>
            </section>
            <!-- C√°c th·∫ª t√≠nh nƒÉng -->
            <section class="py-12 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Th·∫ª 1: Tr·∫Øc nghi·ªám t√≠nh c√°ch (Updated OnClick to quiz-hub) -->
                <div class="bg-white p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2">
                    <div class="text-5xl text-indigo-600 mb-4 text-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-16 h-16 mx-auto" viewBox="0 0 20 20" fill="currentColor">
                           <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" />
                           <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd" />
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-2 text-center">Tr·∫Øc nghi·ªám DISC/Holland/MBTI</h3>
                    <p class="text-gray-600 text-center">Hi·ªÉu r√µ ƒëi·ªÉm m·∫°nh, ƒëi·ªÉm y·∫øu v√† s·ªü th√≠ch c·ªßa b·∫£n th√¢n ƒë·ªÉ ƒë∆∞a ra quy·∫øt ƒë·ªãnh ƒë√∫ng ƒë·∫Øn.</p>
                    <div class="text-center mt-4">
                        <button class="text-indigo-600 font-semibold hover:underline" onclick="showPage('quiz-hub')">Kh√°m ph√° ngay &rarr;</button>
                    </div>
                </div>

                <!-- Th·∫ª 2: Tra c·ª©u ng√†nh ngh·ªÅ (Updated Icon) -->
                <div class="bg-white p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2">
                    <div class="text-5xl text-indigo-600 mb-4 text-center">
                         <svg xmlns="http://www.w3.org/2000/svg" class="w-16 h-16 mx-auto" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-2 text-center">Tra c·ª©u ng√†nh ngh·ªÅ AI</h3>
                    <p class="text-gray-600 text-center">S·ª≠ d·ª•ng AI ƒë·ªÉ t√¨m hi·ªÉu chi ti·∫øt v·ªÅ c√°c ng√†nh h·ªçc, c∆° h·ªôi vi·ªác l√†m v√† th·ªã tr∆∞·ªùng lao ƒë·ªông.</p>
                    <div class="text-center mt-4">
                        <button class="text-indigo-600 font-semibold hover:underline" onclick="showPage('search')">B·∫Øt ƒë·∫ßu tra c·ª©u &rarr;</button>
                    </div>
                </div>

                <!-- Th·∫ª 3: T√¢m s·ª± & L·ªùi khuy√™n -->
                <div class="bg-white p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2">
                    <div class="text-5xl text-green-600 mb-4 text-center">üí°</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-2 text-center">G√≥c T√¢m s·ª± & L·ªùi khuy√™n</h3>
                    <p class="text-gray-600 text-center">Nh·∫≠n s·ª± ƒë·ªìng c·∫£m v√† t∆∞ v·∫•n ch√¢n th√†nh t·ª´ AI ƒë·ªÉ gi·∫£i quy·∫øt nh·ªØng bƒÉn khoƒÉn trong cu·ªôc s·ªëng.</p>
                    <div class="text-center mt-4">
                        <button class="text-indigo-600 font-semibold hover:underline" onclick="showPage('advice')">Nh·∫≠n l·ªùi khuy√™n &rarr;</button>
                    </div>
                </div>

                <!-- Th·∫ª 4: G√≥c Truy·ªÅn c·∫£m h·ª©ng -->
                <div class="bg-white p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2">
                    <div class="text-5xl text-red-600 mb-4 text-center">‚≠ê</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-2 text-center">G√≥c Truy·ªÅn c·∫£m h·ª©ng</h3>
                    <p class="text-gray-600 text-center">ƒê·ªçc c√°c c√¢u chuy·ªán c√≥ th·∫≠t v·ªÅ nh·ªØng ng∆∞·ªùi ƒë√£ th√†nh c√¥ng trong s·ª± nghi·ªáp c·ªßa h·ªç.</p>
                    <div class="text-center mt-4">
                        <button class="text-indigo-600 font-semibold hover:underline" onclick="showPage('inspo')">Kh√°m ph√° &rarr;</button>
                    </div>
                </div>

                <!-- Th·∫ª 5: Th√¥ng tin tuy·ªÉn sinh -->
                <div class="bg-white p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2">
                    <div class="text-5xl text-indigo-600 mb-4 text-center">üì£</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-2 text-center">Th√¥ng tin tuy·ªÉn sinh</h3>
                    <p class="text-gray-600 text-center">C·∫≠p nh·∫≠t tin t·ª©c m·ªõi nh·∫•t v·ªÅ c√°c k·ª≥ thi, ph∆∞∆°ng th·ª©c x√©t tuy·ªÉn v√† h·ªçc b·ªïng.</p>
                    <div class="text-center mt-4">
                        <button class="text-indigo-600 font-semibold hover:underline" onclick="showPage('admissions')">Xem chi ti·∫øt &rarr;</button>
                    </div>
                </div>
                
                <!-- Th·∫ª 6: G√≥p √Ω & Kh·∫£o s√°t -->
                <div class="bg-white p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2">
                    <div class="text-5xl text-purple-600 mb-4 text-center">üìù</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-2 text-center">G√≥p √Ω & Kh·∫£o s√°t</h3>
                    <p class="text-gray-600 text-center">ƒê√≥ng g√≥p √Ω ki·∫øn v√† tham gia kh·∫£o s√°t ƒë·ªÉ gi√∫p ch√∫ng t√¥i c·∫£i thi·ªán h·ªá th·ªëng.</p>
                    <div class="text-center mt-4">
                        <button class="text-indigo-600 font-semibold hover:underline" onclick="showPage('survey')">ƒê√≥ng g√≥p ngay &rarr;</button>
                    </div>
                </div>

                <!-- Th·∫ª 7: M·∫°ng x√£ h·ªôi -->
                <div class="bg-white p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2">
                    <div class="text-5xl text-indigo-600 mb-4 text-center">üí¨</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-2 text-center">C·ªông ƒë·ªìng</h3>
                    <p class="text-gray-600 text-center">K·∫øt n·ªëi v·ªõi c·ªông ƒë·ªìng, ƒë·∫∑t c√¢u h·ªèi v√† nh·∫≠n l·ªùi khuy√™n t·ª´ c√°c chuy√™n gia.</p>
                    <div class="text-center mt-4">
                        <button class="text-indigo-600 font-semibold hover:underline" onclick="showPage('social-media')">Tham gia c·ªông ƒë·ªìng &rarr;</button>
                    </div>
                </div>
                
                <!-- Th·∫ª 8: THI TH·ª¨ (Updated Onclick) -->
                <div class="bg-white p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 cursor-pointer" onclick="showPage('exam-library')">
                    <div class="text-5xl text-red-600 mb-4 text-center">üî•</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-2 text-center">THI TH·ª¨</h3>
                    <p class="text-gray-600 text-center">Luy·ªán t·∫≠p th·ª±c chi·∫øn v·ªõi ƒë·ªÅ thi ch√≠nh th·ª©c, ƒë·ªÅ m·ªõi v√† b√†i ƒêGNL.</p>
                    <div class="text-center mt-4">
                        <button class="text-red-600 font-semibold hover:underline">Chi·∫øn ƒë·∫•u ngay &rarr;</button>
                    </div>
                </div>

                <!-- Th·∫ª 9: Th√¥ng tin H·ªçc b·ªïng (Updated Onclick) -->
                <div class="bg-white p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 cursor-pointer" onclick="showPage('scholarship')">
                    <div class="text-5xl text-orange-500 mb-4 text-center">üèÖ</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-2 text-center">Th√¥ng tin H·ªçc b·ªïng</h3>
                    <p class="text-gray-600 text-center">T·ªïng h·ª£p ch∆∞∆°ng tr√¨nh h·ªçc b·ªïng, h·ªó tr·ª£ t√†i ch√≠nh cho sinh vi√™n.</p>
                    <div class="text-center mt-4">
                        <button class="text-orange-600 font-semibold hover:underline">T√¨m ki·∫øm ngay &rarr;</button>
                    </div>
                </div>
                
            </section>
        </section>
        
        <!-- Trang Tr·∫Øc nghi·ªám HUB (M·ªõi: Thay th·∫ø n·ªôi dung quiz-page placeholder) -->
        <section id="quiz-hub-page" class="page-content">
             <h1 class="text-4xl font-bold text-center mb-10 text-gray-900">Ch·ªçn B√†i Tr·∫Øc Nghi·ªám Kh√°m Ph√° B·∫£n Th√¢n</h1>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                
                <!-- Th·∫ª DISC -->
                <div class="bg-white p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border-t-8 border-red-500">
                    <h3 class="text-2xl font-bold text-gray-900 mb-2 text-center">DISC (Phong c√°ch h√†nh vi)</h3>
                    <p class="text-gray-600 text-center text-sm">Hi·ªÉu c√°ch b·∫°n ph·∫£n ·ª©ng v·ªõi v·∫•n ƒë·ªÅ, con ng∆∞·ªùi, t·ªëc ƒë·ªô v√† quy t·∫Øc. (30 C√¢u)</p>
                    <div class="text-center mt-4">
                        <button class="bg-red-500 text-white font-semibold py-2 px-6 rounded-full shadow-lg hover:bg-red-600 transition" onclick="initializeQuiz('disc'); showPage('quiz-disc')">L√†m b√†i ngay &rarr;</button>
                    </div>
                </div>

                <!-- Th·∫ª Holland (RIASEC) -->
                <div class="bg-white p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border-t-8 border-indigo-500">
                    <h3 class="text-2xl font-bold text-gray-900 mb-2 text-center">Holland (S·ªü th√≠ch ngh·ªÅ nghi·ªáp)</h3>
                    <p class="text-gray-600 text-center text-sm">X√°c ƒë·ªãnh nh√≥m ngh·ªÅ nghi·ªáp ph√π h·ª£p v·ªõi s·ªü th√≠ch c√° nh√¢n (Realistic, Investigative...). (30 C√¢u)</p>
                    <div class="text-center mt-4">
                        <button class="bg-indigo-500 text-white font-semibold py-2 px-6 rounded-full shadow-lg hover:bg-indigo-600 transition" onclick="initializeQuiz('holland'); showPage('quiz-holland')">L√†m b√†i ngay &rarr;</button>
                    </div>
                </div>
                
                <!-- Th·∫ª MBTI -->
                <div class="bg-white p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 border-t-8 border-green-500">
                    <h3 class="text-2xl font-bold text-gray-900 mb-2 text-center">MBTI (T√¢m l√Ω h·ªçc)</h3>
                    <p class="text-gray-600 text-center text-sm">T√¨m ra lo·∫°i h√¨nh t√≠nh c√°ch (nh√≥m 4 ch·ªØ c√°i) v√† c√°ch b·∫°n t∆∞∆°ng t√°c v·ªõi th·∫ø gi·ªõi. (40 C√¢u)</p>
                    <div class="text-center mt-4">
                        <button class="bg-green-500 text-white font-semibold py-2 px-6 rounded-full shadow-lg hover:bg-green-600 transition" onclick="initializeQuiz('mbti'); showPage('quiz-mbti')">L√†m b√†i ngay &rarr;</button>
                    </div>
                </div>

            </div>
        </section>

        <!-- Trang tr·∫Øc nghi·ªám DISC (Gi·ªØ nguy√™n ID) -->
        <section id="quiz-disc-page" class="page-content">
            <div id="disc-quiz-container" class="w-full max-w-4xl mx-auto bg-white shadow-2xl rounded-xl overflow-hidden p-6 md:p-10">
                <!-- Header -->
                <header class="text-center mb-8">
                    <h1 class="text-4xl font-extrabold text-gray-900 mb-2">Tr·∫Øc Nghi·ªám T√≠nh C√°ch <span class="text-disc-i">DISC</span></h1>
                    <p class="text-lg text-gray-500">30 c√¢u h·ªèi - Kh√°m ph√° phong c√°ch h√†nh vi t·ª± nhi√™n c·ªßa b·∫°n</p>
                    <div class="h-1 bg-gradient-to-r from-red-500 via-blue-500 to-amber-500 rounded mt-3"></div>
                </header>
                
                <!-- Thanh ti·∫øn tr√¨nh t·ªïng th·ªÉ -->
                <div id="disc-overall-progress-container" class="mb-8">
                    <p class="text-sm font-medium text-gray-600 mb-2">Ti·∫øn ƒë·ªô Tr·∫Øc nghi·ªám</p>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <!-- Thanh t·ªïng th·ªÉ (ch·∫°y t·ª´ 0% ƒë·∫øn 100% khi l√†m b√†i) -->
                        <div id="disc-overall-progress-bar" class="bg-disc-s h-2.5 rounded-full transition-all duration-500 ease-out" style="width: 0%;"></div>
                    </div>
                </div>

                <!-- Quiz Area (Khu v·ª±c c√¢u h·ªèi) -->
                <div id="disc-quiz-area">
                    <!-- Questions will be dynamically inserted here -->
                </div>

                <!-- Result Area (Khu v·ª±c k·∫øt qu·∫£) -->
                <div id="disc-result-area" class="hidden text-center">
                    <h2 class="text-3xl font-bold mb-4 text-gray-800">üéâ K·∫øt Qu·∫£ T√≠nh C√°ch DISC C·ªßa B·∫°n</h2>
                    <div id="disc-result-profile" class="p-6 md:p-8 rounded-xl shadow-lg border-t-8 border-disc-i bg-white transition-all duration-500">
                        <div id="disc-main-style-display" class="mb-4">
                            <!-- Main style will be inserted here -->
                        </div>

                        <!-- Score Chart -->
                        <div class="grid grid-cols-2 gap-4 text-left mt-6">
                            
                            <!-- D - Dominance -->
                            <div class="flex items-center space-x-3 p-3 bg-red-50 rounded-lg shadow-md">
                                <span class="text-disc-d text-2xl font-bold">D</span>
                                <div class="flex-1">
                                    <div class="flex justify-between items-baseline">
                                        <p class="text-sm font-semibold text-gray-700">Th·ªëng tr·ªã (Dominance)</p>
                                        <span id="disc-score-count-d" class="text-base font-bold text-disc-d">0 / 30</span> <!-- HI·ªÇN TH·ªä ƒêI·ªÇM -->
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                                        <!-- Thanh n√†y s·∫Ω ch·∫°y m∆∞·ª£t m√† khi xem k·∫øt qu·∫£ -->
                                        <div id="disc-score-d" class="h-2.5 rounded-full progress-bar-transition" style="background-color: var(--tw-disc-d); width: 0%;"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- I - Influence -->
                            <div class="flex items-center space-x-3 p-3 bg-blue-50 rounded-lg shadow-md">
                                <span class="text-disc-i text-2xl font-bold">I</span>
                                <div class="flex-1">
                                    <div class="flex justify-between items-baseline">
                                        <p class="text-sm font-semibold text-gray-700">·∫¢nh h∆∞·ªüng (Influence)</p>
                                        <span id="disc-score-count-i" class="text-base font-bold text-disc-i">0 / 30</span> <!-- HI·ªÇN TH·ªä ƒêI·ªÇM -->
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                                        <!-- Thanh n√†y s·∫Ω ch·∫°y m∆∞·ª£t m√† khi xem k·∫øt qu·∫£ -->
                                        <div id="disc-score-i" class="h-2.5 rounded-full progress-bar-transition" style="background-color: var(--tw-disc-i); width: 0%;"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- S - Steadiness -->
                            <div class="flex items-center space-x-3 p-3 bg-green-50 rounded-lg shadow-md">
                                <span class="text-disc-s text-2xl font-bold">S</span>
                                <div class="flex-1">
                                    <div class="flex justify-between items-baseline">
                                        <p class="text-sm font-semibold text-gray-700">Ki√™n ƒë·ªãnh (Steadiness)</p>
                                        <span id="disc-score-count-s" class="text-base font-bold text-disc-s">0 / 30</span> <!-- HI·ªÇN TH·ªä ƒêI·ªÇM -->
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                                        <!-- Thanh n√†y s·∫Ω ch·∫°y m∆∞·ª£t m√† khi xem k·∫øt qu·∫£ -->
                                        <div id="disc-score-s" class="h-2.5 rounded-full progress-bar-transition" style="background-color: var(--tw-disc-s); width: 0%;"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- C - Conscientiousness -->
                            <div class="flex items-center space-x-3 p-3 bg-yellow-50 rounded-lg shadow-md">
                                <span class="text-disc-c text-2xl font-bold">C</span>
                                <div class="flex-1">
                                    <div class="flex justify-between items-baseline">
                                        <p class="text-sm font-semibold text-gray-700">Tu√¢n th·ªß (Conscientiousness)</p>
                                        <span id="disc-score-count-c" class="text-base font-bold text-disc-c">0 / 30</span> <!-- HI·ªÇN TH·ªä ƒêI·ªÇM -->
                                    </div>
                                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                                        <!-- Thanh n√†y s·∫Ω ch·∫°y m∆∞·ª£t m√† khi xem k·∫øt qu·∫£ -->
                                        <div id="disc-score-c" class="h-2.5 rounded-full progress-bar-transition" style="background-color: var(--tw-disc-c); width: 0%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <p id="disc-result-description" class="mt-6 text-gray-600 leading-relaxed italic"></p>

                        <button onclick="DISCEngine.restartQuiz()" class="mt-8 bg-gray-700 hover:bg-gray-900 text-white font-bold py-3 px-6 rounded-lg transition duration-300 transform hover:scale-105 shadow-md">
                            L√†m l·∫°i Tr·∫Øc nghi·ªám
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Trang tr·∫Øc nghi·ªám Holland (M·ªõi) -->
        <section id="quiz-holland-page" class="page-content">
            <div id="holland-quiz-container" class="w-full max-w-4xl mx-auto bg-white shadow-2xl rounded-xl overflow-hidden p-6 md:p-10">
                <!-- Header -->
                <header class="text-center mb-8">
                    <h1 class="text-4xl font-extrabold text-gray-900 mb-2">Tr·∫Øc Nghi·ªám S·ªü Th√≠ch Ngh·ªÅ Nghi·ªáp <span class="text-indigo-600">Holland (RIASEC)</span></h1>
                    <p class="text-lg text-gray-500">30 c√¢u h·ªèi - Kh√°m ph√° nh√≥m ngh·ªÅ nghi·ªáp ph√π h·ª£p v·ªõi s·ªü th√≠ch c·ªßa b·∫°n.</p>
                    <div class="h-1 bg-gradient-to-r from-red-700 via-purple-500 to-gray-600 rounded mt-3"></div>
                </header>
                
                <!-- Thanh ti·∫øn tr√¨nh t·ªïng th·ªÉ -->
                <div id="holland-overall-progress-container" class="mb-8">
                    <p class="text-sm font-medium text-gray-600 mb-2">Ti·∫øn ƒë·ªô Tr·∫Øc nghi·ªám</p>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div id="holland-overall-progress-bar" class="bg-indigo-500 h-2.5 rounded-full transition-all duration-500 ease-out" style="width: 0%;"></div>
                    </div>
                </div>

                <!-- Quiz Area (Khu v·ª±c c√¢u h·ªèi) -->
                <div id="holland-quiz-area">
                    <!-- Questions will be dynamically inserted here -->
                </div>

                <!-- Result Area (Khu v·ª±c k·∫øt qu·∫£) -->
                <div id="holland-result-area" class="hidden text-center">
                    <h2 class="text-3xl font-bold mb-4 text-gray-800">üéâ K·∫øt Qu·∫£ M√£ Holland (RIASEC) C·ªßa B·∫°n</h2>
                    <div id="holland-result-profile" class="p-6 md:p-8 rounded-xl shadow-lg border-t-8 border-indigo-500 bg-white transition-all duration-500">
                        <div id="holland-main-style-display" class="mb-4">
                            <!-- Main style will be inserted here -->
                        </div>

                        <!-- Score Chart -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-left mt-6" id="holland-score-chart">
                            <!-- Holland Scores will be dynamically inserted here -->
                        </div>

                        <p id="holland-result-description" class="mt-6 text-gray-600 leading-relaxed italic"></p>

                        <button onclick="HollandEngine.restartQuiz()" class="mt-8 bg-gray-700 hover:bg-gray-900 text-white font-bold py-3 px-6 rounded-lg transition duration-300 transform hover:scale-105 shadow-md">
                            L√†m l·∫°i Tr·∫Øc nghi·ªám
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Trang tr·∫Øc nghi·ªám MBTI (M·ªõi) -->
        <section id="quiz-mbti-page" class="page-content">
            <div id="mbti-quiz-container" class="w-full max-w-4xl mx-auto bg-white shadow-2xl rounded-xl overflow-hidden p-6 md:p-10">
                <!-- Header -->
                <header class="text-center mb-8">
                    <h1 class="text-4xl font-extrabold text-gray-900 mb-2">Tr·∫Øc Nghi·ªám T√≠nh C√°ch <span class="text-green-600">MBTI</span></h1>
                    <p class="text-lg text-gray-500">40 c√¢u h·ªèi - Kh√°m ph√° 4 c·∫∑p ƒë·ªëi l·∫≠p ch√≠nh trong t√≠nh c√°ch c·ªßa b·∫°n.</p>
                    <div class="h-1 bg-gradient-to-r from-green-500 via-blue-500 to-pink-400 rounded mt-3"></div>
                </header>
                
                <!-- Thanh ti·∫øn tr√¨nh t·ªïng th·ªÉ -->
                <div id="mbti-overall-progress-container" class="mb-8">
                    <p class="text-sm font-medium text-gray-600 mb-2">Ti·∫øn ƒë·ªô Tr·∫Øc nghi·ªám</p>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div id="mbti-overall-progress-bar" class="bg-green-500 h-2.5 rounded-full transition-all duration-500 ease-out" style="width: 0%;"></div>
                    </div>
                </div>

                <!-- Quiz Area (Khu v·ª±c c√¢u h·ªèi) -->
                <div id="mbti-quiz-area">
                    <!-- Questions will be dynamically inserted here -->
                </div>

                <!-- Result Area (Khu v·ª±c k·∫øt qu·∫£) -->
                <div id="mbti-result-area" class="hidden text-center">
                    <h2 class="text-3xl font-bold mb-4 text-gray-800">üéâ K·∫øt Qu·∫£ T√≠nh C√°ch MBTI C·ªßa B·∫°n</h2>
                    <div id="mbti-result-profile" class="p-6 md:p-8 rounded-xl shadow-lg border-t-8 border-green-500 bg-white transition-all duration-500">
                        <div id="mbti-main-style-display" class="mb-4">
                            <!-- Main style will be inserted here -->
                        </div>
                        <p id="mbti-result-description" class="mt-6 text-gray-600 leading-relaxed italic"></p>
                        <button onclick="MBTIEngine.restartQuiz()" class="mt-8 bg-gray-700 hover:bg-gray-900 text-white font-bold py-3 px-6 rounded-lg transition duration-300 transform hover:scale-105 shadow-md">
                            L√†m l·∫°i Tr·∫Øc nghi·ªám
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Trang tra c·ª©u ng√†nh ngh·ªÅ (Chatbot AI) -->
        <section id="search-page" class="page-content">
            <h1 class="text-4xl font-bold text-center mb-8 text-gray-900">H·ªèi ƒë√°p Ng√†nh ngh·ªÅ c√πng AI (C√≥ tr√≠ch d·∫´n ngu·ªìn)</h1>
            <div class="bg-white p-8 rounded-3xl shadow-xl flex flex-col chat-container">
                <div id="chat-history" class="flex-grow overflow-y-auto p-4 mb-4 flex flex-col space-y-4 rounded-xl border border-gray-200 bg-gray-50">
                    <!-- L·ªãch s·ª≠ chat s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã t·∫°i ƒë√¢y -->
                </div>
                <div class="flex items-center space-x-4">
                    <input type="text" id="search-user-input" placeholder="B·∫°n mu·ªën h·ªèi v·ªÅ ng√†nh ngh·ªÅ g√¨?" class="flex-grow p-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-indigo-500" disabled>
                    <button id="search-send-btn" class="bg-indigo-600 text-white font-bold p-3 rounded-full shadow-lg hover:bg-indigo-700 transition duration-300 disabled:opacity-50" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                            <path d="M3.478 2.405a.75.75 0 00-.926.94l2.432 7.917H3.75a.75.75 0 00-.75.75v6.75a.75.75 0 001.085.67L17.25 4.75l-13.772-2.345Z" />
                        </svg>
                    </button>
                </div>
            </div>
        </section>

        <!-- Trang T√¢m s·ª± & L·ªùi khuy√™n (Chatbot T∆∞ v·∫•n) -->
        <section id="advice-page" class="page-content">
            <h1 class="text-4xl font-bold text-center mb-8 text-gray-900">G√≥c T√¢m s·ª± & L·ªùi khuy√™n Cu·ªôc s·ªëng (AI ƒë·ªìng c·∫£m)</h1>
            <div class="bg-white p-8 rounded-3xl shadow-xl flex flex-col chat-container">
                <div id="advice-chat-history" class="flex-grow overflow-y-auto p-4 mb-4 flex flex-col space-y-4 rounded-xl border border-gray-200 bg-gray-50">
                    <!-- L·ªãch s·ª≠ chat s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã t·∫°i ƒë√¢y -->
                </div>
                <div class="flex items-center space-x-4">
                    <input type="text" id="advice-user-input" placeholder="B·∫°n ƒëang c·∫£m th·∫•y th·∫ø n√†o? H√£y chia s·∫ª nh√©." class="flex-grow p-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-green-500" disabled>
                    <button id="advice-send-btn" class="bg-green-600 text-white font-bold p-3 rounded-full shadow-lg hover:bg-green-700 transition duration-300 disabled:opacity-50" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                            <path d="M3.478 2.405a.75.75 0 00-.926.94l2.432 7.917H3.75a.75.75 0 00-.75.75v6.75a.75.75 0 001.085.67L17.25 4.75l-13.772-2.345Z" />
                        </svg>
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Trang Truy·ªÅn c·∫£m h·ª©ng -->
        <!-- ... (Code gi·ªØ nguy√™n) ... -->
        <section id="inspo-page" class="page-content">
            <h1 class="text-4xl font-bold text-center mb-10 text-gray-900">G√≥c Truy·ªÅn c·∫£m h·ª©ng: Nh·ªØng C√¢u Chuy·ªán Th·∫≠t</h1>
            <p class="text-center text-gray-600 mb-12 max-w-3xl mx-auto">
                Kh√°m ph√° h√†nh tr√¨nh ƒë·∫ßy n·ªó l·ª±c, th·∫•t b·∫°i v√† th√†nh c√¥ng c·ªßa nh·ªØng ng∆∞·ªùi tr·∫ª Vi·ªát Nam ƒë√£ t√¨m th·∫•y con ƒë∆∞·ªùng s·ª± nghi·ªáp c·ªßa m√¨nh.
            </p>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- C√¢u chuy·ªán 1 -->
                <div class="bg-white p-8 rounded-3xl shadow-xl border-l-4 border-red-500">
                    <h3 class="text-2xl font-bold text-red-700 mb-3">Th·∫£o: T·ª´ Blogger ·∫®m Th·ª±c ƒë·∫øn CEO ·ª®ng d·ª•ng n·∫•u ƒÉn</h3>
                    <p class="text-sm text-gray-500 mb-4">Lƒ©nh v·ª±c: C√¥ng ngh·ªá & ·∫®m th·ª±c | M√£ Holland: ASE</p>
                    <p class="text-gray-700 mb-4">
                        Th·∫£o b·∫Øt ƒë·∫ßu ch·ªâ v·ªõi m·ªôt blog nh·ªè chia s·∫ª c√¥ng th·ª©c n·∫•u ƒÉn. Sau 3 nƒÉm, c√¥ nh·∫≠n ra v·∫•n ƒë·ªÅ l·ªõn nh·∫•t c·ªßa ng∆∞·ªùi d√πng l√† qu·∫£n l√Ω c√¥ng th·ª©c v√† l√™n th·ª±c ƒë∆°n...
                    </p>
                    <button class="text-indigo-600 font-semibold hover:underline" onclick="showStoryModal('thao')">ƒê·ªçc to√†n b·ªô c√¢u chuy·ªán &rarr;</button>
                </div>

                <!-- C√¢u chuy·ªán 2 -->
                <div class="bg-white p-8 rounded-3xl shadow-xl border-l-4 border-green-500">
                    <h3 class="text-2xl font-bold text-green-700 mb-3">Ho√†ng: B·ªè K·ªπ thu·∫≠t X√¢y d·ª±ng ƒë·ªÉ theo ƒëu·ªïi Thi·∫øt k·∫ø ƒê·ªì h·ªça</h3>
                    <p class="text-sm text-gray-500 mb-4">Lƒ©nh v·ª±c: S√°ng t·∫°o | M√£ Holland: AIE</p>
                    <p class="text-gray-700 mb-4">
                        Ho√†ng t·ª´ng h·ªçc X√¢y d·ª±ng theo ƒë·ªãnh h∆∞·ªõng gia ƒë√¨nh, nh∆∞ng lu√¥n c·∫£m th·∫•y kh√¥ng ph√π h·ª£p. Sau hai nƒÉm, c·∫≠u quy·∫øt ƒë·ªãnh t·∫°m d·ª´ng ƒë·ªÉ tham gia c√°c kh√≥a h·ªçc thi·∫øt k·∫ø online...
                    </p>
                    <button class="text-indigo-600 font-semibold hover:underline" onclick="showStoryModal('hoang')">ƒê·ªçc to√†n b·ªô c√¢u chuy·ªán &rarr;</button>
                </div>

                <!-- C√¢u chuy·ªán 3 -->
                <div class="bg-white p-8 rounded-3xl shadow-xl border-l-4 border-blue-500 lg:col-span-2">
                    <h3 class="text-2xl font-bold text-blue-700 mb-3">Lan: Mang C√¥ng ngh·ªá v√†o Ru·ªông ƒë·ªìng</h3>
                    <p class="text-sm text-gray-500 mb-4">Lƒ©nh v·ª±c: N√¥ng nghi·ªáp c√¥ng ngh·ªá | M√£ Holland: RIC</p>
                    <p class="text-gray-700 mb-4">
                        Lan t·ªët nghi·ªáp ng√†nh C√¥ng ngh·ªá sinh h·ªçc v√† quy·∫øt t√¢m v·ªÅ qu√™ ph√°t tri·ªÉn m√¥ h√¨nh n√¥ng nghi·ªáp th√¥ng minh. C√¥ ·ª©ng d·ª•ng IoT v√† ph√¢n t√≠ch d·ªØ li·ªáu ƒë·ªÉ qu·∫£n l√Ω ch·∫•t l∆∞·ª£ng ƒë·∫•t v√† dinh d∆∞·ª°ng...
                    </p>
                    <button class="text-indigo-600 font-semibold hover:underline" onclick="showStoryModal('lan')">ƒê·ªçc to√†n b·ªô c√¢u chuy·ªán &rarr;</button>
                </div>
            </div>
        </section>

        <!-- Trang Kh·∫£o s√°t & G√≥p √Ω -->
        <!-- ... (Code gi·ªØ nguy√™n) ... -->
        <section id="survey-page" class="page-content">
            <h1 class="text-4xl font-bold text-center mb-8 text-gray-900">G√≥p √Ω & Kh·∫£o s√°t Ng∆∞·ªùi d√πng</h1>
            <div class="bg-white p-8 rounded-3xl shadow-xl h-[80vh] min-h-[600px] flex flex-col">
                <p class="text-center text-gray-600 mb-4">
                    √ù ki·∫øn c·ªßa b·∫°n l√† v√¥ c√πng quan tr·ªçng ƒë·ªÉ ch√∫ng t√¥i c·∫£i thi·ªán h·ªá sinh th√°i ƒë·ªãnh h∆∞·ªõng ngh·ªÅ nghi·ªáp n√†y. Xin c·∫£m ∆°n b·∫°n ƒë√£ d√†nh th·ªùi gian!
                </p>
                <iframe src="https://docs.google.com/forms/d/e/1FAIpQLScPlm_y_VS_fiVGtQBC_2auIino13tKOrEDB0DtWKqgagRXSQ/viewform?usp=embed_facebook"
                        width="100%"
                        height="100%"
                        frameborder="0"
                        marginheight="0"
                        marginwidth="0"
                        class="rounded-2xl border border-gray-300 flex-grow"
                        title="Form Kh·∫£o s√°t">
                    ƒêang t·∫£i form kh·∫£o s√°t...
                </iframe>
            </div>
        </section>
        
        <!-- Trang tuy·ªÉn sinh -->
        <!-- ... (Code gi·ªØ nguy√™n) ... -->
        <section id="admissions-page" class="page-content">
            <h1 class="text-4xl font-bold text-center mb-8">Th√¥ng tin tuy·ªÉn sinh</h1>
            <div class="bg-white p-8 rounded-3xl shadow-xl">
                <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 gap-4 mb-8">
                    <button class="admissions-nav-btn bg-indigo-600 text-white font-semibold py-3 px-4 rounded-xl shadow hover:bg-indigo-700 transition-colors" data-key="forms" onclick="showAdmissionsContent('forms')">
                        H√¨nh th·ª©c Tuy·ªÉn sinh
                    </button>
                    <button class="admissions-nav-btn bg-indigo-100 text-indigo-800 font-semibold py-3 px-4 rounded-xl shadow hover:bg-indigo-200 transition-colors" data-key="universities" onclick="showAdmissionsContent('universities')">
                        Tr∆∞·ªùng ƒê·∫°i h·ªçc, Cao ƒê·∫≥ng
                    </button>
                    <button class="admissions-nav-btn bg-indigo-100 text-indigo-800 font-semibold py-3 px-4 rounded-xl shadow hover:bg-indigo-200 transition-colors" data-key="news" onclick="showAdmissionsContent('news')">
                        Th√¥ng b√°o, Tin t·ª©c
                    </button>
                    <button class="admissions-nav-btn bg-indigo-100 text-indigo-800 font-semibold py-3 px-4 rounded-xl shadow hover:bg-indigo-200 transition-colors" data-key="scholarships" onclick="showAdmissionsContent('scholarships')">
                        H·ªçc b·ªïng
                    </button>
                </div>
                <div id="admissions-content-display" class="p-6 bg-gray-50 rounded-2xl border border-gray-200 min-h-[200px]">
                    <!-- N·ªôi dung tuy·ªÉn sinh s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y -->
                </div>
            </div>
        </section>

        <!-- Trang m·∫°ng x√£ h·ªôi -->
        <!-- ... (Code gi·ªØ nguy√™n) ... -->
        <section id="social-media-page" class="page-content">
            <h1 class="text-4xl font-bold text-center mb-8">Tham gia c·ªông ƒë·ªìng</h1>
            <p class="text-center text-gray-600 mb-12">
                K·∫øt n·ªëi v·ªõi ch√∫ng t√¥i qua c√°c n·ªÅn t·∫£ng m·∫°ng x√£ h·ªôi ƒë·ªÉ c·∫≠p nh·∫≠t nh·ªØng th√¥ng tin m·ªõi nh·∫•t.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <a href="http://www.youtube.com/@EDUPATH-f4e" target="_blank" class="block bg-white p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 text-center">
                    <div class="text-6xl text-red-500 mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" fill="currentColor" class="w-16 h-16 mx-auto">
                            <path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.517 48.284 47.838C117.22 448 288 448 288 448s170.781 0 213.371-11.486c23.497-6.321 42.003-24.188 48.284-47.838 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.147l142.753 71.791-142.753 71.791z"/>
                        </svg>
                    </div>
                    <h4 class="text-2xl font-bold mb-2">YouTube</h4>
                    <p class="text-gray-600">Xem c√°c video chuy√™n s√¢u v√† workshop v·ªÅ ƒë·ªãnh h∆∞·ªõng ngh·ªÅ nghi·ªáp.</p>
                    <span class="inline-block mt-4 text-indigo-600 font-semibold hover:underline">Theo d√µi ngay &rarr;</span>
                </a>
                <a href="https://www.facebook.com/profile.php?id=61582417071028" target="_blank" class="block bg-white p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 text-center">
                    <div class="text-6xl text-blue-600 mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="currentColor" class="w-16 h-16 mx-auto">
                            <path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V489C413.31 482.38 504 379.78 504 256z"/>
                        </svg>
                    </div>
                    <h4 class="text-2xl font-bold mb-2">Facebook</h4>
                    <p class="text-gray-600">Tham gia c·ªông ƒë·ªìng, h·ªèi ƒë√°p v√† nh·∫≠n t∆∞ v·∫•n tr·ª±c ti·∫øp.</p>
                    <span class="inline-block mt-4 text-indigo-600 font-semibold hover:underline">Theo d√µi ngay &rarr;</span>
                </a>
                <a href="https://tiktok.com/@edupath.tng.lai.c" target="_blank" class="block bg-white p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 text-center">
                    <div class="text-6xl text-black mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor" class="w-16 h-16 mx-auto">
                            <path d="M448,209.91a210.06,210.06,0,0,1-122.77-39.25V349.38A162.55,162.55,0,1,1,185,188.31V278.2h213.13V209.91ZM185,324.42A76.25,76.25,0,1,0,108.75,248.17,76.15,76.15,0,0,0,185,324.42Z"/>
                        </svg>
                    </div>
                    <h4 class="text-2xl font-bold mb-2">TikTok</h4>
                    <p class="text-gray-600">Xem c√°c video ng·∫Øn v√† m·∫πo h·ªØu √≠ch v·ªÅ ch·ªçn ng√†nh, ngh·ªÅ.</p>
                    <span class="inline-block mt-4 text-indigo-600 font-semibold hover:underline">Theo d√µi ngay &rarr;</span>
                </a>
            </div>
        </section>

        <!-- Scholarship Page (FIXED ID and CLASS) -->
        <!-- ... (Code gi·ªØ nguy√™n) ... -->
        <section id="scholarship-page" class="page-content">
             <h1 class="text-4xl font-bold text-gray-800 mb-8 text-center">Th√¥ng Tin H·ªçc B·ªïng & H·ªó Tr·ª£ T√†i Ch√≠nh</h1>
            <div class="bg-white p-8 rounded-3xl card-shadow">
                <p class="text-lg text-gray-700 mb-8 text-center max-w-3xl mx-auto">Vi·ªác t√¨m ki·∫øm h·ªçc b·ªïng gi√∫p gi·∫£m b·ªõt g√°nh n·∫∑ng t√†i ch√≠nh, ƒë·∫∑c bi·ªát quan tr·ªçng v·ªõi h·ªçc sinh ·ªü khu v·ª±c n√¥ng th√¥n, kh√≥ khƒÉn.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="p-6 border-l-4 border-indigo-500 bg-indigo-50 rounded-lg">
                        <h4 class="font-bold text-xl text-indigo-700 mb-2">H·ªçc b·ªïng Tuy·ªÉn sinh (ƒêH)</h4>
                        <p class="text-sm text-gray-600">D·ª±a tr√™n ƒëi·ªÉm thi THPT ho·∫∑c ƒëi·ªÉm h·ªçc b·∫° xu·∫•t s·∫Øc. Gi√° tr·ªã: 50% - 100% h·ªçc ph√≠ nƒÉm ƒë·∫ßu.</p>
                        <span class="text-xs font-semibold text-indigo-600 mt-2 block">D√†nh cho: H·ªçc sinh c√≥ th√†nh t√≠ch cao.</span>
                    </div>
                    <div class="p-6 border-l-4 border-green-500 bg-green-50 rounded-lg">
                        <h4 class="font-bold text-xl text-green-700 mb-2">H·ªçc b·ªïng V∆∞·ª£t Kh√≥</h4>
                        <p class="text-sm text-gray-600">H·ªó tr·ª£ h·ªçc sinh c√≥ ho√†n c·∫£nh kh√≥ khƒÉn. Gi√° tr·ªã: H·ªó tr·ª£ sinh ho·∫°t ph√≠ v√† d·ª•ng c·ª• h·ªçc t·∫≠p.</p>
                        <span class="text-xs font-semibold text-green-600 mt-2 block">D√†nh cho: H·ªçc sinh kh√≥ khƒÉn, v√πng s√¢u/xa.</span>
                    </div>
                    <div class="p-6 border-l-4 border-yellow-500 bg-yellow-50 rounded-lg">
                        <h4 class="font-bold text-xl text-yellow-700 mb-2">H·ªçc b·ªïng Doanh nghi·ªáp</h4>
                        <p class="text-sm text-gray-600">D√†nh cho c√°c ng√†nh K·ªπ thu·∫≠t, IT, N√¥ng nghi·ªáp. Y√™u c·∫ßu cam k·∫øt l√†m vi·ªác sau t·ªët nghi·ªáp.</p>
                        <span class="text-xs font-semibold text-yellow-600 mt-2 block">D√†nh cho: H·ªçc sinh theo ng√†nh k·ªπ thu·∫≠t, IT.</span>
                    </div>
                </div>

                <h4 class="text-2xl font-bold text-gray-800 mt-10 mb-4">C√°c B∆∞·ªõc T√¨m Ki·∫øm H·ªçc B·ªïng Ch·ªß ƒê·ªông:</h4>
                <ul class="list-disc list-inside text-gray-700 space-y-2">
                    <li>T√¨m ki·∫øm th√¥ng b√°o tr√™n website c·ªßa c√°c tr∆∞·ªùng ƒê·∫°i h·ªçc (m·ª•c Tuy·ªÉn sinh/T√†i ch√≠nh).</li>
                    <li>Tham kh·∫£o c√°c t·ªï ch·ª©c phi l·ª£i nhu·∫≠n (v√≠ d·ª•: Qu·ªπ Khuy·∫øn h·ªçc ƒë·ªãa ph∆∞∆°ng, Qu·ªπ T·∫•m L√≤ng V√†ng...).</li>
                    <li>Li√™n h·ªá tr·ª±c ti·∫øp v·ªõi Ph√≤ng C√¥ng t√°c Sinh vi√™n c·ªßa tr∆∞·ªùng THPT ƒë·ªÉ n·∫Øm b·∫Øt th√¥ng tin nhanh nh·∫•t.</li>
                </ul>
                <button class="mt-8 bg-orange-600 text-white font-bold py-3 px-6 rounded-xl hover:bg-orange-700 transition duration-300" onclick="showCustomModal('Th√¥ng b√°o', 'T√≠nh nƒÉng tra c·ª©u chi ti·∫øt h·ªçc b·ªïng ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn v√† s·∫Ω s·ªõm ra m·∫Øt!')">
                    Tra C·ª©u Danh S√°ch H·ªçc B·ªïng Chi Ti·∫øt (S·∫Øp ra m·∫Øt)
                </button>
            </div>
        </section>

        <!-- Exam Library Page (FIXED ID and CLASS) -->
        <!-- ... (Code gi·ªØ nguy√™n) ... -->
        <section id="exam-library-page" class="page-content">
            <h1 class="text-4xl font-bold text-gray-800 mb-8 text-center">Khu V·ª±c Thi Th·ª≠: Luy·ªán T·∫≠p Th·ª±c Chi·∫øn</h1>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Card 1: Official Exams -->
                <div class="bg-white p-6 rounded-2xl card-shadow flex flex-col">
                    <div class="flex-grow">
                        <h4 class="text-xl font-bold text-gray-900 mb-2">1. ƒê·ªÅ Thi Ch√≠nh Th·ª©c C√°c NƒÉm</h4>
                        <p class="text-gray-500 text-sm mb-4">L√†m quen v·ªõi c·∫•u tr√∫c v√† ƒë·ªô kh√≥ c·ªßa ƒë·ªÅ thi T·ªët nghi·ªáp THPT QG c√°c nƒÉm tr∆∞·ªõc.</p>
                        <p class="text-xs text-indigo-600 mb-4 font-semibold">Ch·∫•m ƒëi·ªÉm & bi·∫øt k·∫øt qu·∫£ t·ª©c th√¨!</p>
                        
                        <div class="space-y-4">
                            <select id="official-exam-year" class="input-score">
                                <option value="">-- Ch·ªçn NƒÉm Thi --</option>
                                <option value="2024">ƒê·ªÅ thi 2024</option>
                                <option value="2023">ƒê·ªÅ thi 2023</option>
                            </select>
                            <select id="official-exam-subject" class="input-score">
                                <option value="">-- Ch·ªçn B√†i thi M√¥n --</option>
                                <option value="Toan">To√°n</option>
                                <option value="NgoaiNgu">Ngo·∫°i Ng·ªØ (Ti·∫øng Anh)</option>
                                <option value="Ly">V·∫≠t L√Ω</option>
                                <option value="Hoa">H√≥a H·ªçc</option>
                                <option value="Sinh">Sinh H·ªçc</option>
                            </select>
                        </div>
                    </div>
                    <button onclick="linkToAzota('thpt_official')" class="w-full btn-test-hub btn-indigo mt-6">
                        B·∫Øt ƒë·∫ßu Thi Th·ª≠
                    </button>
                </div>

                <!-- Card 2: New Exams -->
                <div class="bg-white p-6 rounded-2xl card-shadow flex flex-col justify-between">
                    <div>
                        <h4 class="text-xl font-bold text-gray-900 mb-2">2. Thi Th·ª≠ ƒê·ªÅ M·ªõi (S·ªü GD)</h4>
                        <p class="text-gray-500 text-sm mb-4">Luy·ªán t·∫≠p c√°c ƒë·ªÅ thi th·ª≠ m·ªõi nh·∫•t t·ª´ c√°c S·ªü Gi√°o d·ª•c tr√™n to√†n qu·ªëc.</p>
                        <p class="text-xs text-blue-500 mb-3 font-semibold">Ch·∫•m ƒëi·ªÉm & bi·∫øt k·∫øt qu·∫£ t·ª©c th√¨!</p>
                    </div>
                    <button onclick="linkToAzota('thpt_new')" class="w-full btn-test-hub btn-blue mt-6">
                        Kh√°m Ph√° Ng√¢n H√†ng ƒê·ªÅ
                    </button>
                </div>

                <!-- Card 3: Competency Exams -->
                <div class="bg-white p-6 rounded-2xl card-shadow flex flex-col justify-between">
                    <div>
                        <h4 class="text-xl font-bold text-gray-900 mb-2">3. Thi Th·ª≠ ƒê√°nh gi√° NƒÉng l·ª±c</h4>
                        <p class="text-gray-500 text-sm mb-4">M√¥ ph·ªèng b√†i thi ƒêGNL (ƒêHQG TPHCM, H√† N·ªôi) ƒë·ªÉ l√†m quen v·ªõi d·∫°ng c√¢u h·ªèi t∆∞ duy.</p>
                        <p class="text-xs text-green-500 mb-3 font-semibold">Ch·∫•m ƒëi·ªÉm & bi·∫øt k·∫øt qu·∫£ t·ª©c th√¨!</p>
                    </div>
                    <button onclick="linkToAzota('dgnl')" class="w-full btn-test-hub btn-green mt-6">
                        Luy·ªán T·∫≠p ƒêGNL
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Trang API Test (M·ªöI) -->
        <section id="api-test-page" class="page-content">
            <h1 class="text-4xl font-bold text-center mb-8 text-gray-900">Ki·ªÉm tra API Gemini Tr·ª±c ti·∫øp</h1>
            <div class="bg-white p-8 rounded-3xl shadow-xl max-w-4xl mx-auto">
                <p class="text-gray-600 mb-6">S·ª≠ d·ª•ng form d∆∞·ªõi ƒë√¢y ƒë·ªÉ g·ª≠i tr·ª±c ti·∫øp prompt (c√¢u l·ªánh) t·ªõi API Gemini-1.5-Flash.</p>
                <div class="flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 items-center">
                    <input id="api-q" placeholder="Nh·∫≠p prompt (v√≠ d·ª•: Vi·∫øt 3 m·∫πo h·ªçc t·∫≠p hi·ªáu qu·∫£)..." class="flex-grow p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <button id="api-go" class="bg-purple-600 text-white font-bold py-3 px-8 rounded-lg shadow-lg hover:bg-purple-700 transition duration-300 w-full md:w-auto">
                        G·ªçi API
                    </button>
                </div>
                <div class="mt-8">
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">K·∫øt qu·∫£ API:</h3>
                    <pre id="api-out" class="w-full bg-gray-50 border border-gray-200 p-4 rounded-lg overflow-x-auto text-sm" style="white-space:pre-wrap; min-height: 150px;">(K·∫øt qu·∫£ s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y)</pre>
                </div>
            </div>
        </section>

    </main>

    <!-- Modal (C·ª≠a s·ªï pop-up) ƒë·ªÉ hi·ªÉn th·ªã c√¢u chuy·ªán chi ti·∫øt -->
    <div id="storyModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeStoryModal()">&times;</span>
            <div id="modal-story-content" class="pt-4">
                <!-- N·ªôi dung c√¢u chuy·ªán chi ti·∫øt s·∫Ω ƒë∆∞·ª£c ch√®n v√†o ƒë√¢y -->
            </div>
        </div>
    </div>
    
    <!-- Custom Alert Modal (Thay th·∫ø cho window.alert) -->
    <div id="customAlertModal" class="modal">
        <div class="modal-content max-w-sm">
            <span class="close-btn" onclick="document.getElementById('customAlertModal').style.display='none'">&times;</span>
            <h3 id="customAlertTitle" class="text-2xl font-bold text-indigo-600 mb-4"></h3>
            <p id="customAlertMessage" class="text-gray-700"></p>
            <div class="mt-6 text-right">
                <button class="bg-indigo-600 text-white font-bold py-2 px-6 rounded-full hover:bg-indigo-700 transition" onclick="document.getElementById('customAlertModal').style.display='none'">
                    ƒê√£ hi·ªÉu
                </button>
            </div>
        </div>
    </div>


    <!-- Ph·∫ßn ch√¢n trang -->
    <footer class="bg-gray-800 text-white py-6">
        <div class="container mx-auto text-center text-gray-400">
            &copy; 2025 H·ªá sinh th√°i ƒë·ªãnh h∆∞·ªõng ngh·ªÅ nghi·ªáp. ƒê√£ ƒëƒÉng k√Ω b·∫£n quy·ªÅn.
            <div class="mt-2 text-sm">L∆∞·ª£t truy c·∫≠p: <span id="visitor-count">0</span></div>
        </div>
    </footer>

    <script>
        // --- API Key ---
        const apiKey = "AIzaSyDmA3KF2x1tM_EgVjfNchjTODgmPf9v5yI"; // Canvas s·∫Ω t·ª± ƒë·ªông cung c·∫•p API Key
        const GEMINI_API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent"; 
        
        // --- QUIZ ENGINES (DISC, Holland, MBTI) ---

        // H√†m chung ƒë·ªÉ t·∫°o SVG Icon 
        function getTraitIcon(trait) {
            switch (trait) {
                case 'D': return `<svg class="w-8 h-8 text-disc-d" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>`;
                case 'I': return `<svg class="w-8 h-8 text-disc-i" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.292"></path></svg>`;
                case 'S': return `<svg class="w-8 h-8 text-disc-s" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`;
                case 'C': return `<svg class="w-8 h-8 text-disc-c" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.664 5.176-1.374 9-6.073 9-11.664a12.02 12.02 0 00-.382-2.816z"></path></svg>`;
                case 'R': return `<svg class="w-8 h-8" style="color: var(--tw-holland-r);" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10m-8-4h.01"></path></svg>`; // Realistic - Tools
                case 'I': return `<svg class="w-8 h-8" style="color: var(--tw-holland-i);" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 19v2m14-2v2M5 5v2m14-2v2M12 11h.01M12 15h.01M8 15h.01M16 15h.01M8 11h.01M16 11h.01M12 5a2 2 0 110-4 2 2 0 010 4zm0 2a2 2 0 100 4 2 2 0 000-4z"></path></svg>`; // Investigative - Microscope
                case 'A': return `<svg class="w-8 h-8" style="color: var(--tw-holland-a);" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4v16M17 4v16M3 8h4m10 0h4M3 16h4m10 0h4M12 4v16"></path></svg>`; // Artistic - Palette/Art
                case 'S': return `<svg class="w-8 h-8" style="color: var(--tw-holland-s);" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h-4a2 2 0 01-2-2v-2a2 2 0 012-2h4a2 2 0 012 2v2a2 2 0 01-2 2zM9 18a2 2 0 01-2-2V8a2 2 0 012-2h6a2 2 0 012 2v8M12 6V4M15 4h-6"></path></svg>`; // Social - Group/People
                case 'E': return `<svg class="w-8 h-8" style="color: var(--tw-holland-e);" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>`; // Enterprising - Leadership
                case 'C': return `<svg class="w-8 h-8" style="color: var(--tw-holland-c);" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>`; // Conventional - Organization/Structure
                default: return '‚ùì';
            }
        }
        
        // --- 1. DISC Quiz Engine ---
        const DISCEngine = (function() {
             // M·∫£ng 30 c√¢u h·ªèi DISC
            const fullQuestionsList = [
                {
                    text: "Khi l√†m vi·ªác nh√≥m, ƒëi·ªÅu g√¨ m√¥ t·∫£ b·∫°n t·ªët nh·∫•t?",
                    options: [
                        { trait: 'D', text: "T√¥i th√≠ch **l√£nh ƒë·∫°o** v√† ki·ªÉm so√°t k·∫øt qu·∫£." },
                        { trait: 'I', text: "T√¥i mang l·∫°i s·ª± **nhi·ªát t√¨nh** v√† t·∫≠p trung v√†o c√°c √Ω t∆∞·ªüng m·ªõi." },
                        { trait: 'S', text: "T√¥i ƒë·∫£m b·∫£o s·ª± **·ªïn ƒë·ªãnh** v√† h·ªó tr·ª£ ƒë·ªìng ƒë·ªôi." },
                        { trait: 'C', text: "T√¥i ch√∫ tr·ªçng **ch·∫•t l∆∞·ª£ng**, quy tr√¨nh v√† chi ti·∫øt." }
                    ]
                },
                {
                    text: "Trong t√¨nh hu·ªëng xung ƒë·ªôt ho·∫∑c √°p l·ª±c cao, ph·∫£n ·ª©ng c·ªßa b·∫°n l√† g√¨?",
                    options: [
                        { trait: 'D', text: "ƒê·ªëi ƒë·∫ßu tr·ª±c ti·∫øp v·∫•n ƒë·ªÅ ƒë·ªÉ t√¨m **gi·∫£i ph√°p nhanh**." },
                        { trait: 'I', text: "S·ª≠ d·ª•ng s·ª± h√†i h∆∞·ªõc v√† h√≤a gi·∫£i ƒë·ªÉ **gi·∫£m cƒÉng th·∫≥ng**." },
                        { trait: 'S', text: "Duy tr√¨ s·ª± **b√¨nh tƒ©nh**, l·∫Øng nghe ƒë·ªÉ tr√°nh xung ƒë·ªôt." },
                        { trait: 'C', text: "Ph√¢n t√≠ch nguy√™n nh√¢n v√† t√¨m ra **d·ªØ li·ªáu** b·ªã sai." }
                    ]
                },
                {
                    text: "M·ª•c ti√™u quan tr·ªçng nh·∫•t c·ªßa b·∫°n trong c√¥ng vi·ªác l√† g√¨?",
                    options: [
                        { trait: 'D', text: "ƒê·∫°t ƒë∆∞·ª£c **k·∫øt qu·∫£**, v∆∞·ª£t qua c√°c th√°ch th·ª©c." },
                        { trait: 'I', text: "ƒê∆∞·ª£c **c√¥ng nh·∫≠n**, c√≥ t·∫ßm ·∫£nh h∆∞·ªüng x√£ h·ªôi." },
                        { trait: 'S', text: "C√≥ s·ª± **·ªïn ƒë·ªãnh**, an to√†n v√† m√¥i tr∆∞·ªùng h√†i h√≤a." },
                        { trait: 'C', text: "S·ª± **ch√≠nh x√°c**, ki·∫øn th·ª©c chuy√™n s√¢u v√† ti√™u chu·∫©n cao." }
                    ]
                },
                {
                    text: "Ng∆∞·ªùi kh√°c th∆∞·ªùng nh·∫≠n x√©t v·ªÅ t·ªëc ƒë·ªô v√† nh·ªãp ƒë·ªô l√†m vi·ªác c·ªßa b·∫°n nh∆∞ th·∫ø n√†o?",
                    options: [
                        { trait: 'D', text: "**Nhanh**, quy·∫øt ƒëo√°n v√† lu√¥n h∆∞·ªõng ƒë·∫øn h√†nh ƒë·ªông." },
                        { trait: 'I', text: "**Nhanh**, b·ªëc ƒë·ªìng v√† th√≠ch l√†m nhi·ªÅu vi·ªác c√πng l√∫c." },
                        { trait: 'S', text: "**Ch·∫≠m r√£i**, ƒë·ªÅu ƒë·∫∑n v√† c√≥ ph∆∞∆°ng ph√°p." },
                        { trait: 'C', text: "**C·∫©n th·∫≠n**, t·ªâ m·ªâ v√† c·∫ßn th·ªùi gian ƒë·ªÉ ki·ªÉm tra." }
                    ]
                },
                {
                    text: "ƒêi·ªÅu g√¨ khi·∫øn b·∫°n lo l·∫Øng ho·∫∑c s·ª£ h√£i nh·∫•t?",
                    options: [
                        { trait: 'D', text: "B·ªã **l·ª£i d·ª•ng** ho·∫∑c m·∫•t quy·ªÅn ki·ªÉm so√°t." },
                        { trait: 'I', text: "B·ªã **t·ª´ ch·ªëi** ho·∫∑c b·ªã m·∫•t ƒëi t·∫ßm ·∫£nh h∆∞·ªüng." },
                        { trait: 'S', text: "Nh·ªØng **thay ƒë·ªïi ƒë·ªôt ng·ªôt** v√† s·ª± thi·∫øu ·ªïn ƒë·ªãnh." },
                        { trait: 'C', text: "B·ªã ch·ªâ tr√≠ch v·ªÅ **l·ªói sai** ho·∫∑c thi·∫øu ch√≠nh x√°c." }
                    ]
                },
                {
                    text: "B·∫°n ra quy·∫øt ƒë·ªãnh d·ª±a tr√™n ƒëi·ªÅu g√¨?",
                    options: [
                        { trait: 'D', text: "**D·ªØ li·ªáu**, logic v√† √Ω ch√≠ c·ªßa b·∫£n th√¢n." },
                        { trait: 'I', text: "**C·∫£m x√∫c**, tr·ª±c gi√°c v√† s·ª± ƒë·ªìng thu·∫≠n c·ªßa m·ªçi ng∆∞·ªùi." },
                        { trait: 'S', text: "**Kinh nghi·ªám**, c·∫£m gi√°c v√† s·ª± an to√†n." },
                        { trait: 'C', text: "**Ph√¢n t√≠ch** chi ti·∫øt v√† s·ª± ki·ªán kh√°ch quan." }
                    ]
                },
                {
                    text: "Phong c√°ch giao ti·∫øp c·ªßa b·∫°n l√† g√¨?",
                    options: [
                        { trait: 'D', text: "**Tr·ª±c ti·∫øp**, ng·∫Øn g·ªçn, t·∫≠p trung v√†o m·ª•c ti√™u." },
                        { trait: 'I', text: "**Th√¢n thi·ªán**, c·ªüi m·ªü, th√≠ch k·ªÉ chuy·ªán v√† giao l∆∞u." },
                        { trait: 'S', text: "**Nh·∫π nh√†ng**, l·∫Øng nghe, tr√°nh ƒë·ªëi ƒë·∫ßu." },
                        { trait: 'C', text: "**C·ª• th·ªÉ**, trang tr·ªçng, h·ªèi nhi·ªÅu chi ti·∫øt." }
                    ]
                },
                {
                    text: "M·ª©c ƒë·ªô ch·∫•p nh·∫≠n r·ªßi ro c·ªßa b·∫°n?",
                    options: [
                        { trait: 'D', text: "S·∫µn s√†ng ch·∫•p nh·∫≠n **r·ªßi ro l·ªõn** ƒë·ªÉ th·∫Øng l·ªõn." },
                        { trait: 'I', text: "Ch·∫•p nh·∫≠n r·ªßi ro khi c√≥ **s·ª± ·ªßng h·ªô** x√£ h·ªôi." },
                        { trait: 'S', text: "**Tr√°nh r·ªßi ro**, ∆∞u ti√™n s·ª± an to√†n." },
                        { trait: 'C', text: "Ch·ªâ ch·∫•p nh·∫≠n r·ªßi ro ƒë√£ ƒë∆∞·ª£c **t√≠nh to√°n k·ªπ**." }
                    ]
                },
                {
                    text: "Ph·∫£n ·ª©ng c·ªßa b·∫°n v·ªõi s·ª± thay ƒë·ªïi?",
                    options: [
                        { trait: 'D', text: "Ch·ªß ƒë·ªông **t·∫°o ra s·ª± thay ƒë·ªïi** v√† d·∫´n ƒë·∫ßu." },
                        { trait: 'I', text: "Th√≠ch nghi nhanh, **nhi·ªát t√¨nh** th·ª≠ c√°i m·ªõi." },
                        { trait: 'S', text: "**Kh√≥ ch·∫•p nh·∫≠n**, c·∫ßn th·ªùi gian l√†m quen." },
                        { trait: 'C', text: "**Nghi√™n c·ª©u k·ªπ**, y√™u c·∫ßu k·∫ø ho·∫°ch chi ti·∫øt." }
                    ]
                },
                {
                    text: "Vai tr√≤ ∆∞a th√≠ch c·ªßa b·∫°n trong m·ªôt nh√≥m?",
                    options: [
                        { trait: 'D', text: "L√† ng∆∞·ªùi **ƒë∆∞a ra quy·∫øt ƒë·ªãnh** cu·ªëi c√πng." },
                        { trait: 'I', text: "Ng∆∞·ªùi **ƒë·ªông vi√™n** v√† k·∫øt n·ªëi m·ªçi ng∆∞·ªùi." },
                        { trait: 'S', text: "Ng∆∞·ªùi **ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n** v√† ·ªïn ƒë·ªãnh." },
                        { trait: 'C', text: "Ng∆∞·ªùi **ki·ªÉm tra l·ªói** v√† ƒë·∫£m b·∫£o ti√™u chu·∫©n." }
                    ]
                },
                {
                    text: "T√¥i t·∫≠p trung v√†o ƒëi·ªÅu g√¨ nh·∫•t?",
                    options: [
                        { trait: 'D', text: "C√°c **th·ª≠ th√°ch** v√† gi·∫£i ph√°p m·ªõi." },
                        { trait: 'I', text: "M·ªëi **quan h·ªá** v√† b·∫ßu kh√¥ng kh√≠." },
                        { trait: 'S', text: "Duy tr√¨ **hi·ªán tr·∫°ng** v√† ch·∫•t l∆∞·ª£ng c√¥ng vi·ªác." },
                        { trait: 'C', text: "S·ª± **ch√≠nh x√°c** v√† d·ªØ li·ªáu c·ª• th·ªÉ." }
                    ]
                },
                {
                    text: "Th√°i ƒë·ªô c·ªßa b·∫°n khi m·∫Øc l·ªói?",
                    options: [
                        { trait: 'D', text: "S·ª≠a ch·ªØa nhanh, **r√∫t kinh nghi·ªám** v√† ti·∫øp t·ª•c." },
                        { trait: 'I', text: "D·ªÖ d√†ng **b·ªè qua**, t·∫≠p trung v√†o vi·ªác m·ªõi." },
                        { trait: 'S', text: "**Lo l·∫Øng**, s·ª£ b·ªã ng∆∞·ªùi kh√°c ƒë√°nh gi√°." },
                        { trait: 'C', text: "**Kh√≥ ch·ªãu**, t·ª± tr√°ch v√¨ thi·∫øu s·ª± chu·∫©n b·ªã." }
                    ]
                },
                {
                    text: "M·ªçi ng∆∞·ªùi th∆∞·ªùng th·∫•y b·∫°n l√† ng∆∞·ªùi nh∆∞ th·∫ø n√†o?",
                    options: [
                        { trait: 'D', text: "M·∫°nh m·∫Ω, **t·ª± tin**." },
                        { trait: 'I', text: "Vui v·∫ª, **nƒÉng ƒë·ªông**." },
                        { trait: 'S', text: "Th√¢n thi·ªán, **ki√™n ƒë·ªãnh**." },
                        { trait: 'C', text: "T·ªâ m·ªâ, c√≥ **ph∆∞∆°ng ph√°p**." }
                    ]
                },
                {
                    text: "ƒêi·ªÅu b·∫°n c·∫ßn nh·∫•t khi giao ti·∫øp l√† g√¨?",
                    options: [
                        { trait: 'D', text: "S·ª± **hi·ªáu qu·∫£** v√† th·ªùi gian ng·∫Øn." },
                        { trait: 'I', text: "S·ª± **c·ªüi m·ªü** v√† t√°n th∆∞·ªüng." },
                        { trait: 'S', text: "S·ª± **nh·∫•t qu√°n** v√† ƒë·ªìng thu·∫≠n." },
                        { trait: 'C', text: "S·ª± **logic** v√† b·∫±ng ch·ª©ng." }
                    ]
                },
                {
                    text: "Trong c√°c s·ª± ki·ªán x√£ h·ªôi, t√¥i th∆∞·ªùng...",
                    options: [
                        { trait: 'D', text: "Tr·ª±c ti·∫øp ti·∫øp c·∫≠n nh·ªØng ng∆∞·ªùi **quan tr·ªçng**." },
                        { trait: 'I', text: "Nhanh ch√≥ng tr·ªü th√†nh **trung t√¢m** c·ªßa s·ª± ch√∫ √Ω." },
                        { trait: 'S', text: "T∆∞∆°ng t√°c ch·ªß y·∫øu v·ªõi nh·ªØng ng∆∞·ªùi t√¥i **quen**." },
                        { trait: 'C', text: "**Quan s√°t** v√† l·∫Øng nghe tr∆∞·ªõc khi n√≥i." }
                    ]
                },
                {
                    text: "T√¥i qu·∫£n l√Ω th·ªùi gian b·∫±ng c√°ch...",
                    options: [
                        { trait: 'D', text: "T·∫≠p trung v√†o vi·ªác **ho√†n th√†nh m·ª•c ti√™u**." },
                        { trait: 'I', text: "**Linh ho·∫°t**, th√≠ch ·ª©ng v·ªõi c∆° h·ªôi b·∫•t ng·ªù." },
                        { trait: 'S', text: "Theo m·ªôt **l·ªãch tr√¨nh ƒë·ªÅu ƒë·∫∑n**, kh√¥ng thay ƒë·ªïi." },
                        { trait: 'C', text: "L·∫≠p **k·∫ø ho·∫°ch chi ti·∫øt** v√† tu√¢n th·ªß ch·∫∑t ch·∫Ω." }
                    ]
                },
                {
                    text: "Khi c·∫ßn ch·ªâ tr√≠ch ng∆∞·ªùi kh√°c, t√¥i...",
                    options: [
                        { trait: 'D', text: "Th·∫≥ng th·∫Øn v√† **tr·ª±c ti·∫øp** v√†o v·∫•n ƒë·ªÅ." },
                        { trait: 'I', text: "**Nh·∫π nh√†ng**, c·ªë g·∫Øng ƒë·ªông vi√™n ƒë·ªÉ tr√°nh l√†m t·ªïn th∆∞∆°ng." },
                        { trait: 'S', text: "R·∫•t **kh√≥ ƒë·ªÉ ch·ªâ tr√≠ch**, s·ª£ l√†m m·∫•t l√≤ng." },
                        { trait: 'C', text: "Cung c·∫•p **b·∫±ng ch·ª©ng c·ª• th·ªÉ** v√† chi ti·∫øt ƒë·ªÉ h·ªç s·ª≠a." }
                    ]
                },
                {
                    text: "M√¥i tr∆∞·ªùng l√†m vi·ªác l√Ω t∆∞·ªüng c·ªßa b·∫°n l√†?",
                    options: [
                        { trait: 'D', text: "**C·∫°nh tranh**, c√≥ nhi·ªÅu quy·ªÅn t·ª± ch·ªß." },
                        { trait: 'I', text: "M·ªü, **vui v·∫ª**, c√≥ nhi·ªÅu t∆∞∆°ng t√°c x√£ h·ªôi." },
                        { trait: 'S', text: "**Y√™n tƒ©nh**, h·ª£p t√°c, √≠t √°p l·ª±c thay ƒë·ªïi." },
                        { trait: 'C', text: "C√≥ **c·∫•u tr√∫c**, c√≥ ti√™u chu·∫©n r√µ r√†ng." }
                    ]
                },
                {
                    text: "Khi b·∫Øt ƒë·∫ßu m·ªôt d·ª± √°n m·ªõi, t√¥i...",
                    options: [
                        { trait: 'D', text: "Mu·ªën **b·∫Øt ƒë·∫ßu ngay** l·∫≠p t·ª©c, kh√¥ng c·∫ßn qu√° nhi·ªÅu th√¥ng tin." },
                        { trait: 'I', text: "T·∫°o m·ªôt cu·ªôc h·ªçp ƒë·ªÉ c√πng nhau **l√™n √Ω t∆∞·ªüng** v√† khu·∫•y ƒë·ªông kh√¥ng kh√≠." },
                        { trait: 'S', text: "T√¨m hi·ªÉu xem **ng∆∞·ªùi kh√°c** ƒë√£ l√†m g√¨ tr∆∞·ªõc ƒë√¢y v√† tham kh·∫£o." },
                        { trait: 'C', text: "ƒê·∫£m b·∫£o t√¥i c√≥ **t·∫•t c·∫£ c√°c chi ti·∫øt** tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu." }
                    ]
                },
                {
                    text: "ƒêi·ªÅu g√¨ l√†m b·∫°n c·∫£m th·∫•y ƒë∆∞·ª£c tr√¢n tr·ªçng?",
                    options: [
                        { trait: 'D', text: "ƒê∆∞·ª£c c√¥ng nh·∫≠n v·ªÅ **th√†nh t√≠ch** v√† quy·ªÅn l·ª±c." },
                        { trait: 'I', text: "ƒê∆∞·ª£c **khen ng·ª£i c√¥ng khai** tr∆∞·ªõc ƒë√°m ƒë√¥ng." },
                        { trait: 'S', text: "ƒê∆∞·ª£c **c·∫£m ∆°n ri√™ng t∆∞** v√¨ s·ª± h·ªó tr·ª£ c·ªßa t√¥i." },
                        { trait: 'C', text: "ƒê∆∞·ª£c khen ng·ª£i v·ªÅ **ƒë·ªô ch√≠nh x√°c** v√† logic." }
                    ]
                },
                {
                    text: "Khi x√¢y d·ª±ng m·ªëi quan h·ªá, t√¥i...",
                    options: [
                        { trait: 'D', text: "T·∫≠p trung v√†o nh·ªØng **l·ª£i √≠ch** chung c√≥ th·ªÉ ƒë·∫°t ƒë∆∞·ª£c." },
                        { trait: 'I', text: "D√†nh th·ªùi gian **giao l∆∞u** v√† t·∫°o k·∫øt n·ªëi c√° nh√¢n." },
                        { trait: 'S', text: "X√¢y d·ª±ng l√≤ng tin b·∫±ng s·ª± **trung th√†nh** v√† h·ªó tr·ª£." },
                        { trait: 'C', text: "D·ª±a tr√™n s·ª± t√¥n tr·ªçng v·ªÅ **nƒÉng l·ª±c** v√† ti√™u chu·∫©n." }
                    ]
                },
                {
                    text: "Trong c√°c cu·ªôc h·ªçp, t√¥i th√≠ch...",
                    options: [
                        { trait: 'D', text: "ƒê∆∞a ra **√Ω ki·∫øn cu·ªëi c√πng** v√† t√≥m t·∫Øt h√†nh ƒë·ªông." },
                        { trait: 'I', text: "Tham gia **t√≠ch c·ª±c**, khu·∫•y ƒë·ªông kh√¥ng kh√≠." },
                        { trait: 'S', text: "ƒê·∫£m b·∫£o **m·ªçi ng∆∞·ªùi ƒë·ªÅu ƒë∆∞·ª£c l·∫Øng nghe** v√† kh√¥ng ai b·ªã b·ªè s√≥t." },
                        { trait: 'C', text: "ƒê·∫∑t **c√¢u h·ªèi chi ti·∫øt** v√† y√™u c·∫ßu b·∫±ng ch·ª©ng." }
                    ]
                },
                {
                    text: "T√¥i coi tr·ªçng kh√¥ng gian c√° nh√¢n ƒë·ªÉ...",
                    options: [
                        { trait: 'D', text: "ƒê·∫£m b·∫£o t√¥i c√≥ th·ªÉ **l√†m vi·ªác kh√¥ng b·ªã gi√°n ƒëo·∫°n**." },
                        { trait: 'I', text: "Chu·∫©n b·ªã cho c√°c **t∆∞∆°ng t√°c x√£ h·ªôi** v√† giao l∆∞u ti·∫øp theo." },
                        { trait: 'S', text: "Duy tr√¨ **s·ª± c√¢n b·∫±ng** v√† tr√°nh √°p l·ª±c." },
                        { trait: 'C', text: "**T·∫≠p trung** v√†o c√°c v·∫•n ƒë·ªÅ ph·ª©c t·∫°p v√† c·∫ßn s·ª± ch√≠nh x√°c." }
                    ]
                },
                {
                    text: "Khi ƒë√†m ph√°n, chi·∫øn l∆∞·ª£c c·ªßa t√¥i l√†...",
                    options: [
                        { trait: 'D', text: "C·ªë g·∫Øng **th·∫Øng** v√† ƒë·∫°t ƒë∆∞·ª£c m·ª•c ti√™u c√° nh√¢n." },
                        { trait: 'I', text: "D√πng s·ª± h·∫•p d·∫´n v√† **s·ª©c thuy·∫øt ph·ª•c** ƒë·ªÉ c√≥ k·∫øt qu·∫£ t·ªët nh·∫•t." },
                        { trait: 'S', text: "T√¨m ki·∫øm m·ªôt **th·ªèa hi·ªáp** m√† m·ªçi ng∆∞·ªùi ƒë·ªÅu ch·∫•p nh·∫≠n." },
                        { trait: 'C', text: "ƒê·∫£m b·∫£o c√°c ƒëi·ªÅu kho·∫£n ƒë·ªÅu **h·ª£p l√Ω** v√† ch√≠nh x√°c theo d·ªØ li·ªáu." }
                    ]
                },
                {
                    text: "M·ª©c ƒë·ªô ki√™n nh·∫´n c·ªßa b·∫°n?",
                    options: [
                        { trait: 'D', text: "**Th·∫•p**, t√¥i mu·ªën k·∫øt qu·∫£ ngay l·∫≠p t·ª©c." },
                        { trait: 'I', text: "**Trung b√¨nh**, mi·ªÖn l√† c√≥ s·ª± t∆∞∆°ng t√°c v√† h√†o h·ª©ng." },
                        { trait: 'S', text: "**R·∫•t cao**, t√¥i c√≥ th·ªÉ ch·ªù ƒë·ª£i m·ªçi vi·ªác ti·∫øn tri·ªÉn." },
                        { trait: 'C', text: "**Cao**, mi·ªÖn l√† m·ªçi th·ª© ƒëang ti·∫øn tri·ªÉn theo logic." }
                    ]
                },
                {
                    text: "Khi gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ, t√¥i...",
                    options: [
                        { trait: 'D', text: "T√¨m ki·∫øm **gi·∫£i ph√°p t·ªëi ∆∞u**, ngay c·∫£ khi n√≥ kh√¥ng ch√≠nh th·ªëng." },
                        { trait: 'I', text: "Tin t∆∞·ªüng v√†o kh·∫£ nƒÉng **s√°ng t·∫°o** c·ªßa nh√≥m." },
                        { trait: 'S', text: "S·ª≠ d·ª•ng c√°c **ph∆∞∆°ng ph√°p ƒë√£ ƒë∆∞·ª£c ki·ªÉm ch·ª©ng**." },
                        { trait: 'C', text: "Th·ª±c hi·ªán m·ªôt **nghi√™n c·ª©u k·ªπ l∆∞·ª°ng** tr∆∞·ªõc khi h√†nh ƒë·ªông." }
                    ]
                },
                {
                    text: "T√¥i nh√¨n nh·∫≠n chi ti·∫øt nh∆∞ th·∫ø n√†o?",
                    options: [
                        { trait: 'D', text: "C·∫ßn thi·∫øt nh∆∞ng **kh√¥ng ph·∫£i l√† ∆∞u ti√™n h√†ng ƒë·∫ßu**." },
                        { trait: 'I', text: "D·ªÖ l√†m t√¥i **ch√°n v√† m·∫•t t·∫≠p trung**." },
                        { trait: 'S', text: "**C·∫ßn thi·∫øt** ƒë·ªÉ ƒë·∫£m b·∫£o s·ª± ·ªïn ƒë·ªãnh." },
                        { trait: 'C', text: "**R·∫•t quan tr·ªçng**, t√¥i th√≠ch s·ª± t·ªâ m·ªâ." }
                    ]
                },
                {
                    text: "Trong m·ªôt d·ª± √°n, b·∫°n mu·ªën ki·ªÉm so√°t ƒëi·ªÅu g√¨?",
                    options: [
                        { trait: 'D', text: "Ki·ªÉm so√°t **m·ª•c ti√™u** v√† ph∆∞∆°ng h∆∞·ªõng chung." },
                        { trait: 'I', text: "Ki·ªÉm so√°t **tinh th·∫ßn** v√† s·ª± k·∫øt n·ªëi c·ªßa ƒë·ªôi." },
                        { trait: 'S', text: "Ki·ªÉm so√°t **nh·ªãp ƒë·ªô** v√† s·ª± ·ªïn ƒë·ªãnh c·ªßa c√¥ng vi·ªác." },
                        { trait: 'C', text: "Ki·ªÉm so√°t **ch·∫•t l∆∞·ª£ng** v√† t√≠nh ch√≠nh x√°c." }
                    ]
                },
                {
                    text: "T√¥i th·ªÉ hi·ªán c·∫£m x√∫c nh∆∞ th·∫ø n√†o?",
                    options: [
                        { trait: 'D', text: "**Ki·ªÉm so√°t t·ªët**, ch·ªâ th·ªÉ hi·ªán khi c·∫ßn thi·∫øt ƒë·ªÉ ƒë·∫°t m·ª•c ti√™u." },
                        { trait: 'I', text: "**C·ªüi m·ªü** v√† b·ªôc l·ªô m·ªôt c√°ch r√µ r√†ng cho m·ªçi ng∆∞·ªùi th·∫•y." },
                        { trait: 'S', text: "**Gi·ªØ k√≠n**, ch·ªâ chia s·∫ª v·ªõi ng∆∞·ªùi th√¢n c·∫≠n." },
                        { trait: 'C', text: "Gi·ªØ trong l√≤ng, th√≠ch s·ª± **kh√°ch quan** v√† logic." }
                    ]
                },
                {
                    text: "B·∫°n mu·ªën ng∆∞·ªùi kh√°c nh·ªõ ƒë·∫øn m√¨nh l√† ng∆∞·ªùi nh∆∞ th·∫ø n√†o?",
                    options: [
                        { trait: 'D', text: "M·ªôt **ng∆∞·ªùi chi·∫øn th·∫Øng** c√≥ nƒÉng l·ª±c." },
                        { trait: 'I', text: "M·ªôt **ng∆∞·ªùi b·∫°n vui v·∫ª** v√† truy·ªÅn c·∫£m h·ª©ng." },
                        { trait: 'S', text: "M·ªôt **ng∆∞·ªùi ƒë√°ng tin c·∫≠y** v√† trung th√†nh." },
                        { trait: 'C', text: "M·ªôt **ng∆∞·ªùi ch√≠nh x√°c** v√† th√¥ng minh." }
                    ]
                }
            ];
            
            const totalQuestions = fullQuestionsList.length;
            let currentQuestionIndex = 0;
            let scores = { D: 0, I: 0, S: 0, C: 0 };
            let userSelections = new Array(totalQuestions).fill(null); 

            const resultDescriptions = {
                'D': {
                    name: 'TH·ªêNG TR·ªä (DOMINANCE)',
                    color: 'var(--tw-disc-d)',
                    icon: '‚ö°',
                    description: "B·∫°n l√† ng∆∞·ªùi **quy·∫øt ƒëo√°n, th√≠ch th·ª≠ th√°ch v√† h∆∞·ªõng ƒë·∫øn k·∫øt qu·∫£**. B·∫°n kh√¥ng ng·∫ßn ng·∫°i ƒë·ªëi m·∫∑t v·ªõi v·∫•n ƒë·ªÅ v√† mu·ªën m·ªçi vi·ªác ƒë∆∞·ª£c th·ª±c hi·ªán m·ªôt c√°ch nhanh ch√≥ng. Ng∆∞·ªùi kh√°c c√≥ th·ªÉ th·∫•y b·∫°n m·∫°nh m·∫Ω v√† t·ª± tin, nh∆∞ng ƒë√¥i khi c√≥ v·∫ª thi·∫øu ki√™n nh·∫´n v√† th·∫≥ng th·∫Øn qu√° m·ª©c. ƒêi·ªÉm m·∫°nh c·ªßa b·∫°n l√† kh·∫£ nƒÉng ra quy·∫øt ƒë·ªãnh v√† s·ª± ch·ªß ƒë·ªông."
                },
                'I': {
                    name: '·∫¢NH H∆Ø·ªûNG (INFLUENCE)',
                    color: 'var(--tw-disc-i)',
                    icon: 'üåà',
                    description: "B·∫°n l√† ng∆∞·ªùi **h√≤a ƒë·ªìng, l·∫°c quan v√† c√≥ s·ª©c thuy·∫øt ph·ª•c**. B·∫°n y√™u th√≠ch c√°c ho·∫°t ƒë·ªông x√£ h·ªôi, th√≠ch truy·ªÅn c·∫£m h·ª©ng v√† t·∫°o d·ª±ng m·ªëi quan h·ªá. B·∫°n l√† ng∆∞·ªùi giao ti·∫øp tuy·ªát v·ªùi, nh∆∞ng ƒë√¥i khi c√≥ th·ªÉ b·ªã coi l√† b·ªëc ƒë·ªìng ho·∫∑c thi·∫øu t·∫≠p trung v√†o chi ti·∫øt. ƒêi·ªÉm m·∫°nh c·ªßa b·∫°n l√† kh·∫£ nƒÉng x√¢y d·ª±ng m·∫°ng l∆∞·ªõi v√† t·∫°o ƒë·ªông l·ª±c."
                },
                'S': {
                    name: 'KI√äN ƒê·ªäNH (STEADINESS)',
                    color: 'var(--tw-disc-s)',
                    icon: 'üå±',
                    description: "B·∫°n l√† ng∆∞·ªùi **ki√™n nh·∫´n, ƒë√°ng tin c·∫≠y v√† c√≥ t√≠nh h·ªó tr·ª£ cao**. B·∫°n coi tr·ªçng s·ª± ·ªïn ƒë·ªãnh, l√†m vi·ªác nh√≥m v√† t·∫°o ra m·ªôt m√¥i tr∆∞·ªùng h√≤a h·ª£p. B·∫°n l√† m·ªôt ng∆∞·ªùi l·∫Øng nghe tuy·ªát v·ªùi, nh∆∞ng c√≥ th·ªÉ g·∫∑p kh√≥ khƒÉn v·ªõi s·ª± thay ƒë·ªïi nhanh ch√≥ng v√† c·∫ßn th·ªùi gian ƒë·ªÉ ƒëi·ªÅu ch·ªânh. ƒêi·ªÉm m·∫°nh c·ªßa b·∫°n l√† s·ª± trung th√†nh, h·ªó tr·ª£ v√† t√≠nh nh·∫•t qu√°n."
                },
                'C': {
                    name: 'TU√ÇN TH·ª¶ (CONSCIENTIOUSNESS)',
                    color: 'var(--tw-disc-c)',
                    icon: 'üî¨',
                    description: "B·∫°n l√† ng∆∞·ªùi **ch√≠nh x√°c, logic v√† c√≥ √≥c ph√¢n t√≠ch**. B·∫°n ƒë·∫∑t ra c√°c ti√™u chu·∫©n cao cho b·∫£n th√¢n v√† ng∆∞·ªùi kh√°c, lu√¥n mu·ªën c√≥ ƒë·ªß th√¥ng tin v√† tu√¢n th·ªß quy tr√¨nh ch·∫•t l∆∞·ª£ng. B·∫°n l√†m vi·ªác t·ªâ m·ªâ, nh∆∞ng c√≥ th·ªÉ m·∫•t qu√° nhi·ªÅu th·ªùi gian ƒë·ªÉ ra quy·∫øt ƒë·ªãnh v√¨ mu·ªën c√≥ s·ª± ho√†n h·∫£o. ƒêi·ªÉm m·∫°nh c·ªßa b·∫°n l√† ch·∫•t l∆∞·ª£ng, ƒë·ªô ch√≠nh x√°c v√† kh·∫£ nƒÉng ph√¢n t√≠ch."
                }
            };

            const quizArea = document.getElementById('disc-quiz-area');
            const resultArea = document.getElementById('disc-result-area');
            const overallProgressBar = document.getElementById('disc-overall-progress-bar'); 

            function updateOverallProgress() {
                if (overallProgressBar) {
                    const completedQuestions = userSelections.filter(s => s !== null).length;
                    const progressPercent = (completedQuestions / totalQuestions) * 100;
                    overallProgressBar.style.width = `${progressPercent}%`;
                }
            }

            function renderQuestion() {
                updateOverallProgress();

                if (currentQuestionIndex >= totalQuestions) {
                    showResults();
                    return;
                }

                const questionData = fullQuestionsList[currentQuestionIndex];
                const currentSelection = userSelections[currentQuestionIndex];

                let optionsHtml = questionData.options.map(option => {
                    const isSelected = currentSelection === option.trait;
                    const traitClass = option.trait.toLowerCase();
                    const borderClass = `border-disc-${traitClass}`;
                    const ringClass = `ring-disc-${traitClass}`;
                    
                    let selectedClass = '';

                    if (isSelected) {
                        selectedClass = `ring-4 ring-opacity-50 ${ringClass} border-4`;
                    }

                    return `
                        <div class="option-card p-4 bg-white rounded-xl border-2 border-gray-200 shadow-md ${selectedClass} hover:${borderClass} hover:border-4 cursor-pointer transition-all duration-200"
                            onclick="DISCEngine.selectOption('${option.trait}')">
                            <div class="flex items-center space-x-4">
                                ${getTraitIcon(option.trait)}
                                <p class="text-gray-700 font-medium text-left">${option.text}</p>
                            </div>
                        </div>
                    `;
                }).join('');

                quizArea.innerHTML = `
                    <div class="bg-white p-6 md:p-8 border-l-4 border-disc-d rounded-lg shadow-xl mb-8">
                        <h3 class="text-xl md:text-2xl font-semibold text-gray-800">${questionData.text} <span class="text-sm font-normal text-gray-500 block mt-2">(C√¢u ${currentQuestionIndex + 1} / ${totalQuestions})</span></h3>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                        ${optionsHtml}
                    </div>
                    <div class="flex justify-between mt-8">
                        <button onclick="DISCEngine.prevQuestion()" ${currentQuestionIndex === 0 ? 'disabled' : ''}
                                class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-6 rounded-lg transition duration-300 ${currentQuestionIndex === 0 ? 'opacity-50 cursor-not-allowed' : 'shadow-md'}">
                            ‚Üê Quay l·∫°i
                        </button>
                        <button onclick="DISCEngine.nextQuestion()" ${currentSelection === null ? 'disabled' : ''}
                                class="bg-disc-d hover:bg-red-600 text-white font-bold py-2 px-6 rounded-lg transition duration-300 ${currentSelection === null ? 'opacity-50 cursor-not-allowed' : 'shadow-lg transform hover:scale-105'}">
                            ${currentQuestionIndex === totalQuestions - 1 ? 'Xem K·∫øt Qu·∫£' : 'Ti·∫øp Theo ‚Üí'}
                        </button>
                    </div>
                `;
            }

            function selectOption(trait) {
                const previousSelection = userSelections[currentQuestionIndex];
                
                if (previousSelection === null) {
                    scores[trait]++;
                } else if (previousSelection !== trait) {
                    scores[previousSelection]--;
                    scores[trait]++;
                }
                userSelections[currentQuestionIndex] = trait;
                renderQuestion();
            }

            function nextQuestion() {
                if (userSelections[currentQuestionIndex] === null) return; 
                currentQuestionIndex++;
                renderQuestion();
            }

            function prevQuestion() {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    renderQuestion();
                }
            }

            function showResults() {
                if (overallProgressBar) {
                    overallProgressBar.style.width = '100%';
                }

                quizArea.classList.add('hidden');
                resultArea.classList.remove('hidden');

                let maxScore = -1;
                let mainTrait = '';
                
                for (const trait in scores) {
                    if (scores[trait] > maxScore) {
                        maxScore = scores[trait];
                        mainTrait = trait;
                    }
                }
                
                const profile = resultDescriptions[mainTrait];
                const maxPossibleScore = totalQuestions;

                const mainStyleDisplay = document.getElementById('disc-main-style-display');
                mainStyleDisplay.innerHTML = `
                    <span class="text-6xl mb-2 block">${profile.icon}</span>
                    <h3 class="text-4xl font-extrabold" style="color: ${profile.color};">
                        ${profile.name} (${mainTrait})
                    </h3>
                    <p class="text-lg text-gray-700 mt-1">Phong c√°ch ch√≠nh c·ªßa b·∫°n</p>
                `;
                
                document.getElementById('disc-result-description').innerText = profile.description;
                document.getElementById('disc-result-profile').style.borderTopColor = profile.color;


                for (const trait in scores) {
                    const traitLower = trait.toLowerCase();
                    const scoreElement = document.getElementById(`disc-score-${traitLower}`);
                    const countElement = document.getElementById(`disc-score-count-${traitLower}`);
                    const percentage = (scores[trait] / maxPossibleScore) * 100;
                    
                    if (scoreElement) { 
                        scoreElement.style.width = `${percentage}%`;
                    }
                    
                    if (countElement) {
                        countElement.innerText = `${scores[trait]} / ${maxPossibleScore}`; 
                    }
                }
            }

            function restartQuiz() {
                currentQuestionIndex = 0;
                scores = { D: 0, I: 0, S: 0, C: 0 };
                userSelections = new Array(totalQuestions).fill(null);
                
                quizArea.classList.remove('hidden');
                resultArea.classList.add('hidden');
                
                if (overallProgressBar) {
                    overallProgressBar.style.width = '0%';
                }

                ['d', 'i', 's', 'c'].forEach(trait => {
                    const scoreElement = document.getElementById(`disc-score-${trait}`);
                    const countElement = document.getElementById(`disc-score-count-${trait}`);
                    if (scoreElement) {
                        scoreElement.style.width = '0%';
                    }
                    if (countElement) {
                        countElement.innerText = `0 / ${totalQuestions}`;
                    }
                });

                renderQuestion();
            }

            return {
                initialize: renderQuestion,
                selectOption,
                nextQuestion,
                prevQuestion,
                restartQuiz
            };
        })();

        // --- 2. Holland Quiz Engine (RIASEC) ---

        const HollandEngine = (function() {
            const quizData = [
                { question: "B·∫°n th√≠ch l√†m vi·ªác v·ªõi m√°y m√≥c, c√¥ng c·ª• v√† s·ª≠a ch·ªØa ƒë·ªì ƒë·∫°c?", type: "R" },
                { question: "B·∫°n th√≠ch c√°c ho·∫°t ƒë·ªông ngo√†i tr·ªùi, th·ª±c h√†nh, t·∫°o ra s·∫£n ph·∫©m c·ª• th·ªÉ?", type: "R" },
                { question: "B·∫°n c√≥ √≥c suy nghƒ© th·ª±c t·∫ø, th√≠ch c√¥ng vi·ªác ƒë√≤i h·ªèi s·ª©c kh·ªèe, tay ch√¢n?", type: "R" },
                { question: "B·∫°n th√≠ch t√¨m hi·ªÉu, kh√°m ph√° nh·ªØng v·∫•n ƒë·ªÅ m·ªõi, ph·ª©c t·∫°p?", type: "I" },
                { question: "B·∫°n th√≠ch quan s√°t, nghi√™n c·ª©u, ƒë·ªçc s√°ch v√† l√†m th√≠ nghi·ªám?", type: "I" },
                { question: "B·∫°n c√≥ t∆∞ duy logic, kh·∫£ nƒÉng ph√¢n t√≠ch v·∫•n ƒë·ªÅ v√† t√¨m ra nguy√™n nh√¢n, gi·∫£i ph√°p?", type: "I" },
                { question: "B·∫°n th√≠ch th·ªÉ hi·ªán b·∫£n th√¢n qua ngh·ªá thu·∫≠t, √¢m nh·∫°c, vƒÉn ch∆∞∆°ng?", type: "A" },
                { question: "B·∫°n th√≠ch l√†m vi·ªác trong m√¥i tr∆∞·ªùng kh√¥ng c√≥ nhi·ªÅu quy t·∫Øc, tho·∫£i m√°i, s√°ng t·∫°o?", type: "A" },
                { question: "B·∫°n c√≥ khi·∫øu th·∫©m m·ªπ, th√≠ch c√°i ƒë·∫πp v√† c√≥ kh·∫£ nƒÉng thi·∫øt k·∫ø, trang tr√≠?", type: "A" },
                { question: "B·∫°n th√≠ch gi√∫p ƒë·ª°, chƒÉm s√≥c ho·∫∑c gi·∫£ng d·∫°y ng∆∞·ªùi kh√°c?", type: "S" },
                { question: "B·∫°n c√≥ kh·∫£ nƒÉng l·∫Øng nghe v√† th·∫•u hi·ªÉu c·∫£m x√∫c c·ªßa ng∆∞·ªùi xung quanh?", type: "S" },
                { question: "B·∫°n th√≠ch l√†m vi·ªác nh√≥m, tham gia c√°c ho·∫°t ƒë·ªông c·ªông ƒë·ªìng, x√£ h·ªôi?", type: "S" },
                { question: "B·∫°n c√≥ tinh th·∫ßn l√£nh ƒë·∫°o, th√≠ch kh·ªüi x∆∞·ªõng v√† ƒëi·ªÅu h√†nh c√¥ng vi·ªác?", type: "E" },
                { question: "B·∫°n th√≠ch c·∫°nh tranh, d√°m ch·∫•p nh·∫≠n r·ªßi ro v√† t√¨m ki·∫øm c∆° h·ªôi kinh doanh?", type: "E" },
                { question: "B·∫°n c√≥ kh·∫£ nƒÉng thuy·∫øt tr√¨nh, ƒë√†m ph√°n v√† g√¢y ·∫£nh h∆∞·ªüng ƒë·∫øn ng∆∞·ªùi kh√°c?", type: "E" },
                { question: "B·∫°n th√≠ch l√†m vi·ªác v·ªõi s·ªë li·ªáu, h·ªì s∆°, gi·∫•y t·ªù m·ªôt c√°ch c√≥ h·ªá th·ªëng?", type: "C" },
                { question: "B·∫°n l√† ng∆∞·ªùi c·∫©n th·∫≠n, t·ªâ m·ªâ, th√≠ch tu√¢n theo c√°c quy t·∫Øc v√† quy tr√¨nh c√≥ s·∫µn?", type: "C" },
                { question: "B·∫°n c√≥ kh·∫£ nƒÉng t·ªï ch·ª©c, s·∫Øp x·∫øp c√¥ng vi·ªác g·ªçn g√†ng, ch√≠nh x√°c?", type: "C" },
                { question: "B·∫°n th√≠ch l·∫Øp r√°p m√¥ h√¨nh, thi·∫øt b·ªã ƒëi·ªán t·ª≠?", type: "R" },
                { question: "B·∫°n th√≠ch ph√¢n lo·∫°i, s·∫Øp x·∫øp c√°c b·ªô s∆∞u t·∫≠p?", type: "I" },
                { question: "B·∫°n th√≠ch v·∫Ω v·ªùi, ch·ª•p ·∫£nh ho·∫∑c quay phim?", type: "A" },
                { question: "B·∫°n th√≠ch t·ªï ch·ª©c c√°c bu·ªïi g·∫∑p g·ª°, s·ª± ki·ªán?", type: "S" },
                { question: "B·∫°n th√≠ch ƒë∆∞a ra √Ω t∆∞·ªüng m·ªõi v√† thuy·∫øt ph·ª•c ng∆∞·ªùi kh√°c theo m√¨nh?", type: "E" },
                { question: "B·∫°n th√≠ch nh·∫≠p li·ªáu, ki·ªÉm tra l·ªói v√† ghi ch√©p chi ti·∫øt?", type: "C" },
                { question: "B·∫°n th√≠ch l√†m vi·ªác ƒë·ªôc l·∫≠p v·ªõi c√°c c√¥ng vi·ªác c·ª• th·ªÉ?", type: "R" },
                { question: "B·∫°n th√≠ch ƒë·ªçc c√°c b√†i b√°o khoa h·ªçc, ph√¢n t√≠ch chuy√™n s√¢u?", type: "I" },
                { question: "B·∫°n th√≠ch vi·∫øt nh·∫≠t k√Ω, th∆° ca ho·∫∑c s√°ng t√°c nh·∫°c?", type: "A" },
                { question: "B·∫°n th√≠ch l√†m t√¨nh nguy·ªán vi√™n, h·ªó tr·ª£ ng∆∞·ªùi gi√†/tr·∫ª em?", type: "S" },
                { question: "B·∫°n th√≠ch qu·∫£n l√Ω m·ªôt ng√¢n s√°ch ho·∫∑c m·ªôt d·ª± √°n nh·ªè?", type: "E" },
                { question: "B·∫°n th√≠ch c√°c c√¥ng vi·ªác ·ªïn ƒë·ªãnh, c√≥ ti·ªÅn l∆∞∆°ng r√µ r√†ng, kh√¥ng m·∫°o hi·ªÉm?", type: "C" }
            ];

            const totalQuestions = quizData.length;
            let currentQuestionIndex = 0;
            let scores = { R: 0, I: 0, A: 0, S: 0, E: 0, C: 0 };
            let userSelections = new Array(totalQuestions).fill(null);

            const HollandTypes = {
                R: "Th·ª±c t·∫ø (Realistic)", I: "Nghi√™n c·ª©u (Investigative)", A: "Ngh·ªá thu·∫≠t (Artistic)",
                S: "X√£ h·ªôi (Social)", E: "Kinh doanh (Enterprising)", C: "Nghi·ªáp v·ª• (Conventional)"
            };

            const HollandCareers = {
                R: ["K·ªπ s∆∞ C∆° kh√≠", "K·ªπ thu·∫≠t X√¢y d·ª±ng", "Phi c√¥ng", "N√¥ng nghi·ªáp C√¥ng ngh·ªá cao", "Th·ª£ th·ªß c√¥ng"],
                I: ["Nh√† Khoa h·ªçc", "Ph√¢n t√≠ch D·ªØ li·ªáu", "L·∫≠p tr√¨nh vi√™n", "B√°c sƒ© (Nghi√™n c·ª©u)", "Chuy√™n gia M√¥i tr∆∞·ªùng"],
                A: ["Thi·∫øt k·∫ø ƒê·ªì h·ªça", "Ki·∫øn tr√∫c s∆∞", "Nh√† VƒÉn/Nh√† Th∆°", "Ngh·ªá sƒ© Bi·ªÉu di·ªÖn", "Nhi·∫øp ·∫£nh gia"],
                S: ["Gi√°o vi√™n", "T∆∞ v·∫•n T√¢m l√Ω", "C√¥ng t√°c X√£ h·ªôi", "Qu·∫£n l√Ω Nh√¢n s·ª±", "Y t√°/ƒêi·ªÅu d∆∞·ª°ng"],
                E: ["Qu·∫£n l√Ω D·ª± √°n", "Doanh nh√¢n", "Chuy√™n vi√™n Marketing", "Lu·∫≠t s∆∞", "Gi√°m ƒë·ªëc Kinh doanh"],
                C: ["K·∫ø to√°n", "Ki·ªÉm to√°n", "Th∆∞ k√Ω", "Th·ªß th∆∞", "Chuy√™n vi√™n Thu·∫ø/Ng√¢n h√†ng"]
            };

            function getScoreValue(selection) {
                return parseInt(selection, 10);
            }

            function updateOverallProgress() {
                const overallProgressBar = document.getElementById('holland-overall-progress-bar');
                if (overallProgressBar) {
                    const completedQuestions = userSelections.filter(s => s !== null).length;
                    const progressPercent = (completedQuestions / totalQuestions) * 100;
                    overallProgressBar.style.width = `${progressPercent}%`;
                }
            }

            function renderQuestion() {
                updateOverallProgress();

                if (currentQuestionIndex >= totalQuestions) {
                    showResults();
                    return;
                }

                const questionData = quizData[currentQuestionIndex];
                const currentSelection = userSelections[currentQuestionIndex];
                const type = questionData.type;
                const typeColorVar = `var(--tw-holland-${type.toLowerCase()})`;

                let optionsHtml = `
                    <div class="flex flex-col sm:flex-row justify-between space-y-2 sm:space-y-0 sm:space-x-4">
                        ${[1, 2, 3, 4, 5].map(value => {
                            const isSelected = currentSelection === value;
                            const label = ['R·∫•t kh√¥ng th√≠ch', 'Kh√¥ng th√≠ch', 'B√¨nh th∆∞·ªùng', 'Th√≠ch', 'R·∫•t th√≠ch'][value - 1];
                            const selectedClass = isSelected ? `ring-4 ring-opacity-50 ring-indigo-500 border-indigo-500 border-4` : '';
                            return `
                                <label class="flex items-center cursor-pointer p-3 bg-white rounded-xl border-2 border-gray-200 shadow-md transition-all duration-200 flex-grow hover:border-indigo-500 ${selectedClass}"
                                    onclick="HollandEngine.selectOption('${type}', ${value})">
                                    <input type="radio" name="holland-q${currentQuestionIndex}-choice" value="${value}" class="form-radio h-4 w-4 mr-2" style="color: ${typeColorVar};" ${isSelected ? 'checked' : ''}>
                                    <span class="text-sm font-medium text-gray-700">${label}</span>
                                </label>`;
                        }).join('')}
                    </div>
                `;

                document.getElementById('holland-quiz-area').innerHTML = `
                    <div class="bg-white p-6 md:p-8 border-l-4 rounded-lg shadow-xl mb-8" style="border-left-color: ${typeColorVar};">
                        <h3 class="text-xl md:text-2xl font-semibold text-gray-800">${questionData.question} <span class="text-sm font-normal text-gray-500 block mt-2">(C√¢u ${currentQuestionIndex + 1} / ${totalQuestions})</span></h3>
                        <p class="text-sm font-medium mt-2" style="color: ${typeColorVar};">${HollandTypes[type]}</p>
                    </div>

                    <div class="mb-8">
                        ${optionsHtml}
                    </div>

                    <div class="flex justify-between mt-8">
                        <button onclick="HollandEngine.prevQuestion()" ${currentQuestionIndex === 0 ? 'disabled' : ''}
                                class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-6 rounded-lg transition duration-300 ${currentQuestionIndex === 0 ? 'opacity-50 cursor-not-allowed' : 'shadow-md'}">
                            ‚Üê Quay l·∫°i
                        </button>
                        <button onclick="HollandEngine.nextQuestion()" ${currentSelection === null ? 'disabled' : ''}
                                class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded-lg transition duration-300 ${currentSelection === null ? 'opacity-50 cursor-not-allowed' : 'shadow-lg transform hover:scale-105'}">
                            ${currentQuestionIndex === totalQuestions - 1 ? 'Xem K·∫øt Qu·∫£' : 'Ti·∫øp Theo ‚Üí'}
                        </button>
                    </div>
                `;
            }

            function selectOption(type, value) {
                const previousSelection = userSelections[currentQuestionIndex];
                
                if (previousSelection !== null) {
                    scores[type] -= previousSelection;
                }
                scores[type] += value;
                userSelections[currentQuestionIndex] = value;
                renderQuestion();
            }

            function nextQuestion() {
                if (userSelections[currentQuestionIndex] === null) return; 
                currentQuestionIndex++;
                renderQuestion();
            }

            function prevQuestion() {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    renderQuestion();
                }
            }

            function showResults() {
                document.getElementById('holland-overall-progress-bar').style.width = '100%';
                document.getElementById('holland-quiz-area').classList.add('hidden');
                document.getElementById('holland-result-area').classList.remove('hidden');

                const sortedResults = Object.entries(scores).sort(([, a], [, b]) => b - a);
                const riasecCode = sortedResults.slice(0, 3).map(([type]) => type).join('');
                const topType = sortedResults[0][0];
                const topCareers = HollandCareers[topType] || [];
                const topColor = `var(--tw-holland-${topType.toLowerCase()})`;

                const mainStyleDisplay = document.getElementById('holland-main-style-display');
                mainStyleDisplay.innerHTML = `
                    <p class="text-xl font-medium text-gray-800">M√£ Holland c·ªßa b·∫°n l√†:</p>
                    <h3 class="text-6xl font-extrabold mt-2 mb-4" style="color: ${topColor};">${riasecCode}</h3>
                    <p class="text-lg text-gray-700 mt-1">Lo·∫°i h√¨nh ch√≠nh: <strong>${HollandTypes[topType]}</strong></p>
                `;
                
                let scoreChartHtml = '';
                sortedResults.forEach(([type, score]) => {
                    const typeLower = type.toLowerCase();
                    const percentage = (score / (totalQuestions * 5)) * 100; // Max score is 30*5 = 150
                    const color = `var(--tw-holland-${typeLower})`;
                    scoreChartHtml += `
                        <div class="p-3 rounded-lg shadow-md" style="background-color: ${color}1A;">
                            <div class="flex justify-between items-baseline">
                                <p class="text-sm font-semibold text-gray-700">${HollandTypes[type]}</p>
                                <span class="text-base font-bold" style="color: ${color};">${score} ƒëi·ªÉm</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2.5 mt-1">
                                <div class="h-2.5 rounded-full progress-bar-transition" style="background-color: ${color}; width: ${percentage}%;"></div>
                            </div>
                        </div>
                    `;
                });
                document.getElementById('holland-score-chart').innerHTML = scoreChartHtml;

                document.getElementById('holland-result-description').innerHTML = `
                    <p class="mb-4">M√£ ${riasecCode} th·ªÉ hi·ªán s·ª± k·∫øt h·ª£p gi·ªØa c√°c s·ªü th√≠ch c√¥ng vi·ªác c·ªßa b·∫°n. Lo·∫°i h√¨nh ch√≠nh <strong>${HollandTypes[topType]}</strong> g·ª£i √Ω b·∫°n n√™n t√¨m ki·∫øm m√¥i tr∆∞·ªùng l√†m vi·ªác:</p>
                    <ul class="list-disc pl-5 space-y-1 text-gray-800 font-semibold mb-4">
                        ${topCareers.map(c => `<li>${c}</li>`).join('')}
                    </ul>
                    <p class="text-sm italic">H√£y tra c·ª©u chi ti·∫øt h∆°n v·ªÅ c√°c ng√†nh n√†y b·∫±ng AI H∆∞·ªõng Nghi·ªáp sau khi ho√†n t·∫•t b√†i tr·∫Øc nghi·ªám!</p>
                `;
                document.getElementById('holland-result-profile').style.borderTopColor = topColor;
            }

            function restartQuiz() {
                currentQuestionIndex = 0;
                scores = { R: 0, I: 0, A: 0, S: 0, E: 0, C: 0 };
                userSelections = new Array(totalQuestions).fill(null);
                
                document.getElementById('holland-quiz-area').classList.remove('hidden');
                document.getElementById('holland-result-area').classList.add('hidden');
                document.getElementById('holland-overall-progress-bar').style.width = '0%';
                renderQuestion();
            }

            return {
                initialize: renderQuestion,
                selectOption,
                nextQuestion,
                prevQuestion,
                restartQuiz
            };
        })();

        // --- 3. MBTI Quiz Engine (Updated with 40 Questions) ---

        const MBTIEngine = (function() {
             // START: T√çCH H·ª¢P 40 C√ÇU H·ªéI MBTI T·ª™ FILE C·ª¶A B·∫†N
            const quizData = [
                { dimension: 'T_F', question: "Khi ƒë√°nh gi√° th√†nh c√¥ng c·ªßa m·ªôt d·ª± √°n, t√¥i ch√∫ tr·ªçng:", options: [{ trait: 'T', text: "C√°c ch·ªâ s·ªë ƒë·ªãnh l∆∞·ª£ng nh∆∞ ROI, th·ªùi gian ho√†n th√†nh." }, { trait: 'F', text: "S·ª± h√†i l√≤ng c·ªßa kh√°ch h√†ng v√† m·ª©c ƒë·ªô c·∫£i thi·ªán tr·∫£i nghi·ªám ng∆∞·ªùi d√πng." }] },
                { dimension: 'S_N', question: "Khi h·ªçc v·ªÅ c√¥ng c·ª• m·ªõi ƒë·ªÉ s·ª≠ d·ª•ng trong c√¥ng vi·ªác, t√¥i th√≠ch:", options: [{ trait: 'S', text: "Hi·ªÉu ch√≠nh x√°c c√°ch s·ª≠ d·ª•ng t·ª´ng t√≠nh nƒÉng." }, { trait: 'N', text: "Kh√°m ph√° c√°c c√°ch s√°ng t·∫°o ƒë·ªÉ √°p d·ª•ng c√¥ng c·ª• ƒë√≥." }] },
                // C√¢u 3 tr√πng l·∫∑p, b·ªè qua v√† l·∫•y c√¢u 4
                { dimension: 'J_P', question: "Kh√¥ng gian l√†m vi·ªác c·ªßa t√¥i th∆∞·ªùng:", options: [{ trait: 'J', text: "ƒê∆∞·ª£c t·ªï ch·ª©c g·ªçn g√†ng v·ªõi h·ªá th·ªëng s·∫Øp x·∫øp r√µ r√†ng." }, { trait: 'P', text: "C√≥ ƒë·∫∑c ƒëi·ªÉm s√°ng t·∫°o v·ªõi nhi·ªÅu t√†i li·ªáu v√† √Ω t∆∞·ªüng xung quanh." }] },
                { dimension: 'F_T', question: "Trong c√°c cu·ªôc h·ªçp gi·∫£i quy·∫øt xung ƒë·ªôt trong nh√≥m, t√¥i th∆∞·ªùng:", options: [{ trait: 'F', text: "Quan t√¢m ƒë·∫øn c·∫£m x√∫c c·ªßa m·ªçi ng∆∞·ªùi v√† t√¨m c√°ch duy tr√¨ h√≤a kh√≠." }, { trait: 'T', text: "T·∫≠p trung v√†o v·∫•n ƒë·ªÅ v√† t√¨m gi·∫£i ph√°p h·ª£p l√Ω nh·∫•t." }] },
                { dimension: 'J_P', question: "Khi ƒë·ªëi m·∫∑t v·ªõi m·ªôt quy·∫øt ƒë·ªãnh, t√¥i th∆∞·ªùng:", options: [{ trait: 'J', text: "Th√≠ch ƒë∆∞a ra quy·∫øt ƒë·ªãnh nhanh ch√≥ng v√† ti·∫øn v·ªÅ ph√≠a tr∆∞·ªõc." }, { trait: 'P', text: "Gi·ªØ c√°c l·ª±a ch·ªçn m·ªü c√†ng l√¢u c√†ng t·ªët ƒë·ªÉ thu th·∫≠p th√™m th√¥ng tin." }] },
                { dimension: 'S_N', question: "Khi ƒë·ªçc t√†i li·ªáu k·ªπ thu·∫≠t v·ªÅ s·∫£n ph·∫©m m·ªõi, t√¥i th∆∞·ªùng:", options: [{ trait: 'S', text: "Ch√∫ √Ω ƒë·∫øn c√°c chi ti·∫øt c·ª• th·ªÉ v√† th√¥ng s·ªë k·ªπ thu·∫≠t." }, { trait: 'N', text: "T√¨m ki·∫øm √Ω t∆∞·ªüng v√† kh·∫£ nƒÉng ·ª©ng d·ª•ng s√°ng t·∫°o." }] },
                { dimension: 'I_E', question: "Khi c·∫ßn gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ trong c√¥ng vi·ªác, t√¥i th∆∞·ªùng:", options: [{ trait: 'I', text: "D√†nh th·ªùi gian suy nghƒ© m·ªôt m√¨nh tr∆∞·ªõc khi chia s·∫ª √Ω ki·∫øn." }, { trait: 'E', text: "Th·∫£o lu·∫≠n v·ªõi ƒë·ªìng nghi·ªáp ƒë·ªÉ t√¨m gi·∫£i ph√°p." }] },
                { dimension: 'S_N', question: "Trong c√°c cu·ªôc th·∫£o lu·∫≠n v·ªÅ xu h∆∞·ªõng m·ªõi, t√¥i th∆∞·ªùng:", options: [{ trait: 'S', text: "T·∫≠p trung v√†o c√°c xu h∆∞·ªõng hi·ªán t·∫°i c√≥ d·ªØ li·ªáu h·ªó tr·ª£." }, { trait: 'N', text: "D·ª± ƒëo√°n c√°c xu h∆∞·ªõng t∆∞∆°ng lai v√† th·∫£o lu·∫≠n v·ªÅ kh·∫£ nƒÉng." }] },
                { dimension: 'E_I', question: "Khi c√¥ng ty t·ªï ch·ª©c s·ª± ki·ªán, t√¥i th∆∞·ªùng:", options: [{ trait: 'E', text: "T√≠ch c·ª±c giao l∆∞u v√† k·∫øt n·ªëi v·ªõi nhi·ªÅu ng∆∞·ªùi." }, { trait: 'I', text: "T·∫≠p trung v√†o m·ªôt v√†i cu·ªôc tr√≤ chuy·ªán s√¢u v·ªõi ƒë·ªëi t√°c ho·∫∑c kh√°ch h√†ng." }] },
                { dimension: 'S_P', question: "Khi g·∫∑p v·∫•n ƒë·ªÅ ph√°t sinh trong d·ª± √°n, t√¥i:", options: [{ trait: 'S', text: "Tu√¢n theo quy tr√¨nh x·ª≠ l√Ω v·∫•n ƒë·ªÅ ƒë√£ thi·∫øt l·∫≠p." }, { trait: 'P', text: "Th√≠ch ·ª©ng nhanh v√† t√¨m c√°c gi·∫£i ph√°p s√°ng t·∫°o." }] },
                { dimension: 'F_J', question: "Khi tri·ªÉn khai c√°c gi·∫£i ph√°p cho kh√°ch h√†ng, t√¥i ∆∞u ti√™n:", options: [{ trait: 'F', text: "ƒêi·ªÅu ch·ªânh ph∆∞∆°ng ph√°p tri·ªÉn khai theo nhu c·∫ßu c·ª• th·ªÉ c·ªßa t·ª´ng kh√°ch h√†ng." }, { trait: 'J', text: "Tu√¢n th·ªß quy tr√¨nh tri·ªÉn khai chu·∫©n v√† ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n." }] },
                { dimension: 'T_F', question: "Khi c·∫ßn ph·∫£n h·ªìi v·ªÅ c√¥ng vi·ªác c·ªßa ƒë·ªìng nghi·ªáp, t√¥i th∆∞·ªùng:", options: [{ trait: 'T', text: "ƒê∆∞a ra ph·∫£n h·ªìi tr·ª±c ti·∫øp, r√µ r√†ng v·ªÅ nh·ªØng ƒëi·ªÉm c·∫ßn c·∫£i thi·ªán." }, { trait: 'F', text: "ƒê∆∞a ra ph·∫£n h·ªìi m·ªôt c√°ch t·∫ø nh·ªã, nh·∫•n m·∫°nh ƒëi·ªÉm t√≠ch c·ª±c tr∆∞·ªõc." }] },
                { dimension: 'E_I', question: "Sau m·ªôt ng√†y l√†m vi·ªác cƒÉng th·∫≥ng t·∫°i c√¥ng ty, t√¥i th√≠ch:", options: [{ trait: 'E', text: "Tham gia g·∫∑p g·ª° ƒë·ªìng nghi·ªáp ho·∫∑c tham gia c√°c ho·∫°t ƒë·ªông nh√≥m." }, { trait: 'I', text: "D√†nh th·ªùi gian m·ªôt m√¨nh ƒë·ªÉ th∆∞ gi√£n v√† n·∫°p l·∫°i nƒÉng l∆∞·ª£ng." }] },
                { dimension: 'E_I', question: "Trong qu√° tr√¨nh ƒë√†o t·∫°o ho·∫∑c h∆∞·ªõng d·∫´n, t√¥i c·∫£m th·∫•y tho·∫£i m√°i h∆°n khi:", options: [{ trait: 'E', text: "H∆∞·ªõng d·∫´n tr·ª±c ti·∫øp v√† t∆∞∆°ng t√°c v·ªõi nhi·ªÅu ng∆∞·ªùi." }, { trait: 'I', text: "Chu·∫©n b·ªã t√†i li·ªáu chi ti·∫øt v√† h∆∞·ªõng d·∫´n theo nh√≥m nh·ªè." }] },
                { dimension: 'I_E', question: "Khi nh·∫≠n ƒë∆∞·ª£c th√¥ng tin m·ªõi v·ªÅ s·∫£n ph·∫©m ho·∫∑c d·ªãch v·ª•, t√¥i th∆∞·ªùng:", options: [{ trait: 'I', text: "Xem x√©t k·ªπ th√¥ng tin tr∆∞·ªõc khi chia s·∫ª v·ªõi ng∆∞·ªùi kh√°c." }, { trait: 'E', text: "Chia s·∫ª v√† th·∫£o lu·∫≠n ngay v·ªõi ƒë·ªìng nghi·ªáp." }] },
                { dimension: 'N_S', question: "Khi x√¢y d·ª±ng chi·∫øn l∆∞·ª£c cho doanh nghi·ªáp, t√¥i ∆∞u ti√™n:", options: [{ trait: 'N', text: "C√°c ph∆∞∆°ng ph√°p ti·∫øp c·∫≠n m·ªõi v√† ƒë·ªïi m·ªõi s√°ng t·∫°o." }, { trait: 'S', text: "C√°c gi·∫£i ph√°p ƒë√£ ƒë∆∞·ª£c ch·ª©ng minh v√† c√≥ k·∫øt qu·∫£ c·ª• th·ªÉ." }] },
                { dimension: 'I_E', question: "Trong m√¥i tr∆∞·ªùng l√†m vi·ªác, t√¥i c·∫£m th·∫•y hi·ªáu qu·∫£ nh·∫•t khi:", options: [{ trait: 'I', text: "L√†m vi·ªác trong kh√¥ng gian y√™n tƒ©nh v·ªõi √≠t s·ª± gi√°n ƒëo·∫°n." }, { trait: 'E', text: "L√†m vi·ªác trong kh√¥ng gian m·ªü v·ªõi nhi·ªÅu t∆∞∆°ng t√°c." }] },
                { dimension: 'F_T', question: "Khi ph·∫£i c·∫Øt gi·∫£m ng√¢n s√°ch d·ª± √°n, t√¥i s·∫Ω:", options: [{ trait: 'F', text: "C√¢n nh·∫Øc t√°c ƒë·ªông ƒë·∫øn tinh th·∫ßn v√† ƒë·ªông l·ª±c c·ªßa nh√≥m." }, { trait: 'T', text: "ƒê∆∞a ra quy·∫øt ƒë·ªãnh d·ª±a tr√™n ph√¢n t√≠ch chi ph√≠-l·ª£i √≠ch." }] },
                { dimension: 'S_N', question: "Khi ƒë√°nh gi√° m·ªôt gi·∫£i ph√°p m·ªõi, t√¥i th∆∞·ªùng t·∫≠p trung v√†o:", options: [{ trait: 'S', text: "C√°c t√≠nh nƒÉng c·ª• th·ªÉ v√† d·ªØ li·ªáu hi·ªáu su·∫•t." }, { trait: 'N', text: "Ti·ªÅm nƒÉng ph√°t tri·ªÉn v√† t·∫ßm nh√¨n t·ªïng th·ªÉ c·ªßa gi·∫£i ph√°p." }] },
                { dimension: 'S_F', question: "Trong qu√° tr√¨nh x√¢y d·ª±ng chi·∫øn l∆∞·ª£c marketing, t√¥i th∆∞·ªùng:", options: [{ trait: 'S', text: "T·∫≠p trung v√†o d·ªØ li·ªáu th·ªã tr∆∞·ªùng v√† hi·ªáu qu·∫£ c·ªßa chi·∫øn d·ªãch." }, { trait: 'F', text: "C√¢n nh·∫Øc c·∫£m x√∫c v√† tr·∫£i nghi·ªám c·ªßa kh√°ch h√†ng." }] },
                { dimension: 'F_T', question: "Khi ƒë√°nh gi√° hi·ªáu su·∫•t c·ªßa m·ªôt th√†nh vi√™n trong nh√≥m, t√¥i th∆∞·ªùng:", options: [{ trait: 'F', text: "C√¢n nh·∫Øc c·∫£ n·ªó l·ª±c, ƒë·ªông l·ª±c v√† ho√†n c·∫£nh c√° nh√¢n." }, { trait: 'T', text: "Xem x√©t ch·ªß y·∫øu d·ª±a tr√™n k·∫øt qu·∫£ c√¥ng vi·ªác v√† s·ªë li·ªáu." }] },
                { dimension: 'I_E', question: "Khi ti·∫øp c·∫≠n m·ªôt d·ª± √°n m·ªõi, t√¥i th√≠ch:", options: [{ trait: 'I', text: "Nghi√™n c·ª©u v√† ph√¢n t√≠ch v·∫•n ƒë·ªÅ m·ªôt m√¨nh tr∆∞·ªõc." }, { trait: 'E', text: "Th·∫£o lu·∫≠n √Ω t∆∞·ªüng v·ªõi nh√≥m ngay t·ª´ ƒë·∫ßu." }] },
                { dimension: 'J_P', question: "Trong qu√° tr√¨nh ph√°t tri·ªÉn s·∫£n ph·∫©m ho·∫∑c d·ªãch v·ª• m·ªõi, t√¥i th√≠ch:", options: [{ trait: 'J', text: "Tu√¢n theo l·ªô tr√¨nh ph√°t tri·ªÉn ƒë√£ ƒë∆∞·ª£c l·∫≠p k·∫ø ho·∫°ch." }, { trait: 'P', text: "ƒêi·ªÅu ch·ªânh li√™n t·ª•c d·ª±a tr√™n ph·∫£n h·ªìi v√† √Ω t∆∞·ªüng m·ªõi." }] },
                { dimension: 'P_J', question: "Khi l√†m vi·ªác trong nh√≥m, t√¥i th∆∞·ªùng:", options: [{ trait: 'P', text: "∆Øu ti√™n s·ª± linh ho·∫°t v√† cho ph√©p m·ªçi ng∆∞·ªùi t·ª± t·ªï ch·ª©c c√¥ng vi·ªác." }, { trait: 'J', text: "Th√≠ch ph√¢n c√¥ng nhi·ªám v·ª• r√µ r√†ng v√† theo d√µi ti·∫øn ƒë·ªô." }] },
                { dimension: 'P_J', question: "Khi b·∫Øt ƒë·∫ßu m·ªôt d·ª± √°n m·ªõi, t√¥i th√≠ch:", options: [{ trait: 'P', text: "B·∫Øt ƒë·∫ßu nhanh ch√≥ng v√† ƒëi·ªÅu ch·ªânh k·∫ø ho·∫°ch theo t√¨nh h√¨nh th·ª±c t·∫ø." }, { trait: 'J', text: "L·∫≠p k·∫ø ho·∫°ch chi ti·∫øt v√† thi·∫øt l·∫≠p quy tr√¨nh l√†m vi·ªác r√µ r√†ng." }] },
                { dimension: 'J_P', question: "ƒê·ªëi v·ªõi deadline c·ªßa d·ª± √°n, t√¥i th∆∞·ªùng:", options: [{ trait: 'J', text: "Ho√†n th√†nh c√¥ng vi·ªác tr∆∞·ªõc th·ªùi h·∫°n v√† ƒë·∫£m b·∫£o m·ªçi th·ª© ƒë√∫ng l·ªãch tr√¨nh." }, { trait: 'P', text: "L√†m vi·ªác t·ªët nh·∫•t d∆∞·ªõi √°p l·ª±c v√† th∆∞·ªùng ho√†n th√†nh v√†o ph√∫t cu·ªëi." }] },
                { dimension: 'N_S', question: "Khi ph·∫£i gi·∫£i quy·∫øt s·ª± c·ªë, t√¥i th∆∞·ªùng:", options: [{ trait: 'N', text: "Th·ª≠ nghi·ªám c√°c c√°ch ti·∫øp c·∫≠n m·ªõi ƒë·ªÉ t√¨m gi·∫£i ph√°p t·ªët h∆°n." }, { trait: 'S', text: "Tu√¢n theo quy tr√¨nh x·ª≠ l√Ω s·ª± c·ªë ƒë√£ thi·∫øt l·∫≠p." }] },
                { dimension: 'N_S', question: "Khi l√†m vi·ªác v·ªõi d·ªØ li·ªáu, t√¥i th∆∞·ªùng:", options: [{ trait: 'N', text: "T√¨m ki·∫øm c√°c m·ªëi li√™n h·ªá ·∫©n v√† kh·∫£ nƒÉng ti·ªÅm nƒÉng." }, { trait: 'S', text: "T·∫≠p trung v√†o c√°c th√¥ng tin hi·ªán c√≥ v√† xu h∆∞·ªõng r√µ r√†ng." }] },
                { dimension: 'I_E', question: "Khi c·∫ßn ƒë∆∞a ra quy·∫øt ƒë·ªãnh v·ªÅ chi·∫øn l∆∞·ª£c cho c√¥ng ty, t√¥i th∆∞·ªùng:", options: [{ trait: 'I', text: "Ph√¢n t√≠ch d·ªØ li·ªáu v√† ƒë√°nh gi√° c√°c l·ª±a ch·ªçn m·ªôt c√°ch ƒë·ªôc l·∫≠p." }, { trait: 'E', text: "T·ªï ch·ª©c cu·ªôc h·ªçp ƒë·ªÉ l·∫•y √Ω ki·∫øn t·ª´ nhi·ªÅu ng∆∞·ªùi." }] },
                { dimension: 'S_N', question: "Khi ƒë·ªÅ xu·∫•t gi·∫£i ph√°p cho kh√°ch h√†ng, t√¥i thi√™n v·ªÅ:", options: [{ trait: 'S', text: "C√°c gi·∫£i ph√°p th·ª±c t·∫ø ƒë√£ ƒë∆∞·ª£c th·ª≠ nghi·ªám v√† c√≥ k·∫øt qu·∫£ r√µ r√†ng." }, { trait: 'N', text: "C√°c gi·∫£i ph√°p s√°ng t·∫°o c√≥ th·ªÉ mang l·∫°i ƒë·ªôt ph√°." }] },
                { dimension: 'P_J', question: "ƒê·ªëi v·ªõi l·ªãch l√†m vi·ªác, t√¥i th√≠ch:", options: [{ trait: 'P', text: "M·ªôt l·ªãch tr√¨nh linh ho·∫°t cho ph√©p thay ƒë·ªïi khi c·∫ßn thi·∫øt." }, { trait: 'J', text: "M·ªôt l·ªãch tr√¨nh c√≥ c·∫•u tr√∫c v·ªõi c√°c cu·ªôc h·ªçp ƒë∆∞·ª£c l√™n k·∫ø ho·∫°ch tr∆∞·ªõc." }] },
                { dimension: 'F_T', question: "Khi ph·∫£i t·ª´ ch·ªëi y√™u c·∫ßu c·ªßa kh√°ch h√†ng, t√¥i th∆∞·ªùng:", options: [{ trait: 'F', text: "B√†y t·ªè s·ª± th·∫•u hi·ªÉu v√† t√¨m gi·∫£i ph√°p thay th·∫ø ph√π h·ª£p." }, { trait: 'T', text: "Gi·∫£i th√≠ch l√Ω do k·ªπ thu·∫≠t ho·∫∑c ch√≠nh s√°ch m·ªôt c√°ch r√µ r√†ng." }] },
                { dimension: 'I_E', question: "Khi ph·∫£i gi·∫£i th√≠ch v·∫•n ƒë·ªÅ ph·ª©c t·∫°p cho ng∆∞·ªùi kh√°c, t√¥i th√≠ch:", options: [{ trait: 'I', text: "Chu·∫©n b·ªã t√†i li·ªáu chi ti·∫øt v√† gi·∫£i th√≠ch c√≥ c·∫•u tr√∫c." }, { trait: 'E', text: "Gi·∫£i th√≠ch tr·ª±c ti·∫øp v√† t∆∞∆°ng t√°c qua l·∫°i." }] },
                { dimension: 'F_T', question: "Khi t∆∞ v·∫•n gi·∫£i ph√°p cho kh√°ch h√†ng, t√¥i ∆∞u ti√™n:", options: [{ trait: 'F', text: "C√°c gi·∫£i ph√°p ph√π h·ª£p nh·∫•t v·ªõi vƒÉn h√≥a v√† gi√° tr·ªã c·ªßa kh√°ch h√†ng." }, { trait: 'T', text: "C√°c gi·∫£i ph√°p hi·ªáu qu·∫£ nh·∫•t v·ªÅ m·∫∑t k·ªπ thu·∫≠t v√† chi ph√≠." }] },
                { dimension: 'J_P', question: "Khi ph·∫£i thay ƒë·ªïi k·∫ø ho·∫°ch do t√¨nh hu·ªëng b·∫•t ng·ªù, t√¥i c·∫£m th·∫•y:", options: [{ trait: 'J', text: "Lo l·∫Øng v√† mu·ªën nhanh ch√≥ng thi·∫øt l·∫≠p k·∫ø ho·∫°ch m·ªõi." }, { trait: 'P', text: "Th√≠ch th√∫ v·ªõi th√°ch th·ª©c v√† s·∫µn s√†ng th√≠ch nghi." }] },
                { dimension: 'F_T', question: "Trong c√°c cu·ªôc th·∫£o lu·∫≠n nh√≥m, t√¥i th∆∞·ªùng:", options: [{ trait: 'F', text: "Quan t√¢m ƒë·∫øn s·ª± ƒë·ªìng thu·∫≠n v√† h√†i h√≤a trong nh√≥m." }, { trait: 'T', text: "T·∫≠p trung v√†o logic v√† t√≠nh nh·∫•t qu√°n c·ªßa l·∫≠p lu·∫≠n." }] },
                { dimension: 'J_P', question: "Khi l·∫≠p k·∫ø ho·∫°ch d·ª± √°n, t√¥i th√≠ch:", options: [{ trait: 'J', text: "X√¢y d·ª±ng l·ªãch tr√¨nh chi ti·∫øt v·ªõi c√°c m·ªëc th·ªùi gian c·ª• th·ªÉ." }, { trait: 'P', text: "T·∫°o khu√¥n kh·ªï linh ho·∫°t cho ph√©p ƒëi·ªÅu ch·ªânh khi c·∫ßn thi·∫øt." }] },
                { dimension: 'E_I', question: "Trong c√°c cu·ªôc h·ªçp nh√≥m t·∫°i c√¥ng ty, t√¥i th∆∞·ªùng:", options: [{ trait: 'E', text: "ƒê√≥ng g√≥p √Ω ki·∫øn t√≠ch c·ª±c v√† tham gia th·∫£o lu·∫≠n ngay khi c√≥ c∆° h·ªôi." }, { trait: 'I', text: "L·∫Øng nghe k·ªπ l∆∞·ª°ng v√† ch·ªâ ph√°t bi·ªÉu khi ƒë√£ suy nghƒ© k·ªπ v·ªÅ v·∫•n ƒë·ªÅ." }] },
                { dimension: 'F_T', question: "Khi ph·∫£i ƒë∆∞a ra quy·∫øt ƒë·ªãnh kh√≥ khƒÉn v·ªÅ nh√¢n s·ª±, t√¥i th∆∞·ªùng:", options: [{ trait: 'F', text: "C√¢n nh·∫Øc t√°c ƒë·ªông ƒë·∫øn c·∫£m x√∫c v√† tinh th·∫ßn c·ªßa t·∫•t c·∫£ m·ªçi ng∆∞·ªùi li√™n quan." }, { trait: 'T', text: "Ph√¢n t√≠ch t√¨nh h√¨nh m·ªôt c√°ch kh√°ch quan v√† d·ª±a tr√™n c√°c ti√™u ch√≠ c·ª• th·ªÉ." }] }
            ];
             // END: T√çCH H·ª¢P C√ÇU H·ªéI

            const totalQuestions = quizData.length;
            let currentQuestionIndex = 0;
            let scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            let userSelections = new Array(totalQuestions).fill(null);

            const mbtiDimensionMap = { 
                E_I: ['E', 'I'], I_E: ['I', 'E'],
                S_N: ['S', 'N'], N_S: ['N', 'S'],
                T_F: ['T', 'F'], F_T: ['F', 'T'],
                J_P: ['J', 'P'], P_J: ['P', 'J'],
                // Add more combinations from questions if needed
                S_P: ['S', 'P'], F_J: ['F', 'J'], S_F: ['S', 'F']
             };

            function updateOverallProgress() {
                const overallProgressBar = document.getElementById('mbti-overall-progress-bar');
                if (overallProgressBar) {
                    const completedQuestions = userSelections.filter(s => s !== null).length;
                    const progressPercent = (completedQuestions / totalQuestions) * 100;
                    overallProgressBar.style.width = `${progressPercent}%`;
                }
            }
            function renderQuestion() {
                updateOverallProgress();

                if (currentQuestionIndex >= totalQuestions) {
                    showResults();
                    return;
                }

                const questionData = quizData[currentQuestionIndex];
                const currentSelection = userSelections[currentQuestionIndex];

                let optionsHtml = `
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                        ${questionData.options.map((option, index) => {
                            const isSelected = currentSelection === option.trait;
                            const color = `var(--tw-mbti-${option.trait.toLowerCase()})`;
                            const selectedClass = isSelected ? `ring-4 ring-opacity-50 ring-green-500 border-green-500 border-4` : '';
                            return `
                                <div class="option-card p-4 bg-white rounded-xl border-2 border-gray-200 shadow-md ${selectedClass} hover:border-green-500 hover:border-4 cursor-pointer transition-all duration-200"
                                    onclick="MBTIEngine.selectOption('${questionData.dimension}', '${option.trait}')">
                                    <div class="flex items-center space-x-4">
                                        <div class="text-2xl font-bold" style="color: ${color};">${option.trait}</div>
                                        <p class="text-gray-700 font-medium text-left">${option.text}</p>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;

                document.getElementById('mbti-quiz-area').innerHTML = `
                    <div class="bg-white p-6 md:p-8 border-l-4 border-green-500 rounded-lg shadow-xl mb-8">
                        <h3 class="text-xl md:text-2xl font-semibold text-gray-800">${questionData.question} <span class="text-sm font-normal text-gray-500 block mt-2">(C√¢u ${currentQuestionIndex + 1} / ${totalQuestions})</span></h3>
                    </div>

                    ${optionsHtml}

                    <div class="flex justify-between mt-8">
                        <button onclick="MBTIEngine.prevQuestion()" ${currentQuestionIndex === 0 ? 'disabled' : ''}
                                class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-6 rounded-lg transition duration-300 ${currentQuestionIndex === 0 ? 'opacity-50 cursor-not-allowed' : 'shadow-md'}">
                            ‚Üê Quay l·∫°i
                        </button>
                        <button onclick="MBTIEngine.nextQuestion()" ${currentSelection === null ? 'disabled' : ''}
                                class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg transition duration-300 ${currentSelection === null ? 'opacity-50 cursor-not-allowed' : 'shadow-lg transform hover:scale-105'}">
                            ${currentQuestionIndex === totalQuestions - 1 ? 'Xem K·∫øt Qu·∫£' : 'Ti·∫øp Theo ‚Üí'}
                        </button>
                    </div>
                `;
            }

            function selectOption(dimension, trait) {
                const previousSelection = userSelections[currentQuestionIndex];
                
                if (previousSelection) {
                    scores[previousSelection]--;
                }
                
                scores[trait]++;
                userSelections[currentQuestionIndex] = trait;
                renderQuestion();
            }

            function nextQuestion() {
                if (userSelections[currentQuestionIndex] === null) return; 
                currentQuestionIndex++;
                renderQuestion();
            }

            function prevQuestion() {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    renderQuestion();
                }
            }

            function calculateType(dim1, dim2) {
                return scores[dim1] >= scores[dim2] ? dim1 : dim2;
            }

            function getMBTITitle(code) {
                const titles = {
                    'E': 'H∆∞·ªõng ngo·∫°i', 'I': 'H∆∞·ªõng n·ªôi',
                    'S': 'C·∫£m gi√°c', 'N': 'Tr·ª±c gi√°c',
                    'T': 'L√Ω tr√≠', 'F': 'T√¨nh c·∫£m',
                    'J': 'Nguy√™n t·∫Øc', 'P': 'Linh ho·∫°t'
                };
                return code.split('').map(c => titles[c]).join('-');
            }

            function showResults() {
                document.getElementById('mbti-overall-progress-bar').style.width = '100%';
                document.getElementById('mbti-quiz-area').classList.add('hidden');
                document.getElementById('mbti-result-area').classList.remove('hidden');

                const finalCode = 
                    calculateType('E', 'I') + 
                    calculateType('S', 'N') + 
                    calculateType('T', 'F') + 
                    calculateType('J', 'P');
                
                const fullTitle = getMBTITitle(finalCode);
                const topColor = `var(--tw-mbti-${finalCode.charAt(0).toLowerCase()})`;

                const mainStyleDisplay = document.getElementById('mbti-main-style-display');
                mainStyleDisplay.innerHTML = `
                    <p class="text-xl font-medium text-gray-800">Lo·∫°i h√¨nh t√≠nh c√°ch MBTI c·ªßa b·∫°n l√†:</p>
                    <h3 class="text-6xl font-extrabold mt-2 mb-4" style="color: ${topColor};">${finalCode}</h3>
                    <p class="text-lg text-gray-700 mt-1">(${fullTitle})</p>
                `;
                
                document.getElementById('mbti-result-description').innerHTML = `
                    <p class="mb-4">K·∫øt qu·∫£ c·ªßa b·∫°n l√† <strong>${finalCode}</strong>. ƒê√¢y l√† lo·∫°i h√¨nh t√≠nh c√°ch n·ªïi b·∫≠t v·ªõi c√°c ƒë·∫∑c ƒëi·ªÉm:</p>
                    <ul class="list-disc pl-5 space-y-1 text-gray-800">
                        <li><strong>${calculateType('E', 'I')}:</strong> ${calculateType('E', 'I') === 'E' ? 'B·∫°n nh·∫≠n nƒÉng l∆∞·ª£ng t·ª´ t∆∞∆°ng t√°c x√£ h·ªôi.' : 'B·∫°n nh·∫≠n nƒÉng l∆∞·ª£ng t·ª´ vi·ªác ·ªü m·ªôt m√¨nh.'}</li>
                        <li><strong>${calculateType('S', 'N')}:</strong> ${calculateType('S', 'N') === 'S' ? 'B·∫°n t·∫≠p trung v√†o th·ª±c t·∫ø, chi ti·∫øt.' : 'B·∫°n t·∫≠p trung v√†o √Ω t∆∞·ªüng, kh·∫£ nƒÉng.'}</li>
                        <li><strong>${calculateType('T', 'F')}:</strong> ${calculateType('T', 'F') === 'T' ? 'B·∫°n ra quy·∫øt ƒë·ªãnh d·ª±a tr√™n l√Ω tr√≠, logic.' : 'B·∫°n ra quy·∫øt ƒë·ªãnh d·ª±a tr√™n c·∫£m x√∫c, gi√° tr·ªã.'}</li>
                        <li><strong>${calculateType('J', 'P')}:</strong> ${calculateType('J', 'P') === 'J' ? 'B·∫°n th√≠ch s·ª± ngƒÉn n·∫Øp, c√≥ k·∫ø ho·∫°ch.' : 'B·∫°n th√≠ch s·ª± linh ho·∫°t, t√πy bi·∫øn.'}</li>
                    </ul>
                    <p class="text-sm italic mt-4">L∆∞u √Ω: ƒê·ªÉ c√≥ k·∫øt qu·∫£ ch√≠nh x√°c v√† to√†n di·ªán h∆°n, b·∫°n n√™n t√¨m hi·ªÉu s√¢u v√† th·ª±c hi·ªán c√°c b√†i tr·∫Øc nghi·ªám ƒë·∫ßy ƒë·ªß ƒë∆∞·ª£c ch·ª©ng nh·∫≠n.</p>
                `;
                document.getElementById('mbti-result-profile').style.borderTopColor = topColor;
            }

            function restartQuiz() {
                currentQuestionIndex = 0;
                scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
                userSelections = new Array(totalQuestions).fill(null);
                
                document.getElementById('mbti-quiz-area').classList.remove('hidden');
                document.getElementById('mbti-result-area').classList.add('hidden');
                document.getElementById('mbti-overall-progress-bar').style.width = '0%';
                renderQuestion();
            }

            return {
                initialize: renderQuestion,
                selectOption,
                nextQuestion,
                prevQuestion,
                restartQuiz
            };
        })();

        // --- 4. API Test Engine ---
        const APITestEngine = (function() {
            const API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=";
            const inputElement = document.getElementById('api-q');
            const buttonElement = document.getElementById('api-go');
            const outputElement = document.getElementById('api-out');

            async function callGemini(prompt) {
                const key = apiKey; 

                try {
                    const payload = {
                        contents: [{ role: "user", parts: [{ text: prompt }] }]
                    };

                    const response = await exponentialBackoffFetch(API_URL + key, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify(payload)
                    });
                    
                    const data = await response.json();
                    
                    return data?.candidates?.[0]?.content?.parts?.[0]?.text 
                           || JSON.stringify(data, null, 2);
                } catch (err) {
                    console.error("API Error:", err);
                    return "L·ªói khi g·ªçi API: " + err.message;
                }
            }
            
            function setupListeners() {
                if (!buttonElement) return;

                const handleApiCall = async () => {
                    const q = inputElement.value.trim() || "Vi·∫øt m·ªôt c√¢u ch√†o ng·∫Øn g·ªçn v·ªÅ AI b·∫±ng ti·∫øng Vi·ªát.";
                    outputElement.textContent = "ƒêang g·ªçi API...";
                    buttonElement.disabled = true;
                    buttonElement.classList.add('opacity-50');

                    try {
                        const reply = await callGemini(q);
                        outputElement.textContent = reply;
                    } catch (error) {
                         outputElement.textContent = `L·ªói: ${error.message}`;
                    } finally {
                        buttonElement.disabled = false;
                        buttonElement.classList.remove('opacity-50');
                    }
                };

                buttonElement.removeEventListener('click', handleApiCall); 
                buttonElement.addEventListener('click', handleApiCall);
                inputElement.removeEventListener('keypress', handleApiCall);
                inputElement.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') handleApiCall();
                });
            }

            return {
                initialize: setupListeners
            };
        })();


        // --- Global State and Navigation Logic ---

        let isSearchChatReady = false;
        let isAdviceChatReady = false;
        
        async function exponentialBackoffFetch(url, options, maxRetries = 5) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (response.status === 429 && i < maxRetries - 1) {
                        const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                        await new Promise(resolve => setTimeout(resolve, delay));
                        continue;
                    }
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    return response;
                } catch (error) {
                    if (i === maxRetries - 1) throw error;
                    const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }

        function initializeQuiz(mode) {
            if (mode === 'disc') DISCEngine.restartQuiz();
            else if (mode === 'holland') HollandEngine.restartQuiz();
            else if (mode === 'mbti') MBTIEngine.restartQuiz();
        }

        function toggleMobileMenu() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        }

        function showPage(pageId) {
            document.querySelectorAll('.page-content').forEach(page => page.style.display = 'none');
            
            const pageToShow = document.getElementById(pageId + '-page');
            if (pageToShow) {
                pageToShow.style.display = 'block';
            }
            
            if (pageId === 'quiz-disc') {
                 initializeQuiz('disc'); 
            }
            if (pageId === 'quiz-holland') {
                 initializeQuiz('holland'); 
            }
            if (pageId === 'quiz-mbti') {
                 initializeQuiz('mbti'); 
            }
            if (pageId === 'search' && !isSearchChatReady) {
                setupChatbot('search');
            }
            if (pageId === 'advice' && !isAdviceChatReady) {
                setupChatbot('advice');
            }
            if (pageId === 'admissions') {
                showAdmissionsContent('forms'); 
            }
            if (pageId === 'api-test') {
                APITestEngine.initialize();
            }

            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
                mobileMenu.classList.add('hidden');
            }
            window.scrollTo(0, 0);
        }
        
        // --- Chatbot and API Logic ---

        let searchChatHistory = [{ role: "model", parts: [{ text: "Ch√†o b·∫°n! T√¥i l√† AI H∆∞·ªõng Nghi·ªáp. H√£y nh·∫≠p ng√†nh ngh·ªÅ (v√≠ d·ª•: 'C√¥ng ngh·ªá Th√¥ng tin') ƒë·ªÉ t√¥i tra c·ª©u th√¥ng tin m·ªõi nh·∫•t v√† tr√≠ch d·∫´n ngu·ªìn cho b·∫°n." }] }];
        let adviceChatHistory = [{ role: "model", parts: [{ text: "Ch√†o b·∫°n. T√¥i l√† AI T∆∞ V·∫•n. H√£y chia s·∫ª b·∫•t k·ª≥ kh√≥ khƒÉn hay bƒÉn khoƒÉn n√†o b·∫°n ƒëang g·∫∑p ph·∫£i. T√¥i s·∫Ω l·∫Øng nghe v√† ƒë∆∞a ra l·ªùi khuy√™n ch√¢n th√†nh." }] }];

        async function sendMessageToGemini(userInput, mode) {
            const isSearch = mode === 'search';
            const chatHistory = isSearch ? searchChatHistory : adviceChatHistory;
            const historyElement = isSearch ? document.getElementById('chat-history') : document.getElementById('advice-chat-history');
            const inputElement = isSearch ? document.getElementById('search-user-input') : document.getElementById('advice-user-input');
            const sendButton = isSearch ? document.getElementById('search-send-btn') : document.getElementById('advice-send-btn');

            inputElement.disabled = true;
            sendButton.disabled = true;
            sendButton.innerHTML = `<svg class="animate-spin h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>`;

            chatHistory.push({ role: "user", parts: [{ text: userInput }] });
            appendMessage(historyElement, userInput, 'user');
            appendTypingIndicator(historyElement);
            historyElement.scrollTop = historyElement.scrollHeight;

            const systemPrompt = isSearch 
                ? "B·∫°n l√† m·ªôt chuy√™n gia h∆∞·ªõng nghi·ªáp. H√£y s·ª≠ d·ª•ng Google Search ƒë·ªÉ t√¨m ki·∫øm th√¥ng tin v·ªÅ ng√†nh ngh·ªÅ c·ªßa ng∆∞·ªùi d√πng. Tr·∫£ l·ªùi chi ti·∫øt, ch√≠nh x√°c b·∫±ng ti·∫øng Vi·ªát v√† tr√≠ch d·∫´n t·∫•t c·∫£ c√°c ngu·ªìn."
                : "B·∫°n l√† m·ªôt ng∆∞·ªùi l·∫Øng nghe ch√¢n th√†nh, th·∫•u c·∫£m. H√£y ƒë∆∞a ra l·ªùi khuy√™n ch√¢n th√†nh, kh√≠ch l·ªá v√† kh√¥ng ph√°n x√©t b·∫±ng ti·∫øng Vi·ªát, t·∫≠p trung gi√∫p ng∆∞·ªùi d√πng gi·∫£i quy·∫øt bƒÉn khoƒÉn v·ªÅ s·ª± nghi·ªáp ho·∫∑c cu·ªôc s·ªëng.";

            const payload = {
                contents: chatHistory,
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };
            if (isSearch) {
                payload.tools = [{ "google_search": {} }];
            }

            const apiUrl = `${GEMINI_API_URL}?key=${apiKey}`;

            let aiResponseText = "Xin l·ªói, ƒë√£ x·∫£y ra l·ªói. Vui l√≤ng th·ª≠ l·∫°i.";
            let sources = [];

            try {
                const response = await exponentialBackoffFetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                const candidate = result.candidates?.[0];

                if (candidate?.content?.parts?.[0]?.text) {
                    aiResponseText = candidate.content.parts[0].text;
                    const groundingMetadata = candidate.groundingMetadata;
                    if (groundingMetadata?.groundingAttributions) {
                        sources = groundingMetadata.groundingAttributions
                            .map(attr => ({ uri: attr.web?.uri, title: attr.web?.title }))
                            .filter(src => src.uri && src.title);
                    }
                    chatHistory.push({ role: "model", parts: [{ text: aiResponseText }] });
                } else if (result.error) {
                    aiResponseText = `ƒê√£ x·∫£y ra l·ªói: ${result.error.message}`;
                }
            } catch (error) {
                console.error("API Call failed:", error);
                aiResponseText = "ƒê√£ x·∫£y ra l·ªói k·∫øt n·ªëi. Vui l√≤ng ki·ªÉm tra l·∫°i k·∫øt n·ªëi m·∫°ng ho·∫∑c th·ª≠ l·∫°i sau.";
            } finally {
                removeTypingIndicator();
                appendMessage(historyElement, aiResponseText, 'ai', sources);
                historyElement.scrollTop = historyElement.scrollHeight;
                
                inputElement.disabled = false;
                sendButton.disabled = false;
                sendButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M3.478 2.405a.75.75 0 00-.926.94l2.432 7.917H3.75a.75.75 0 00-.75.75v6.75a.75.75 0 001.085.67L17.25 4.75l-13.772-2.345Z" /></svg>`;
                inputElement.value = '';
                inputElement.focus();
            }
        }

        function appendMessage(historyElement, text, sender, sources = []) {
            const isUser = sender === 'user';
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex ${isUser ? 'justify-end' : 'justify-start'}`;

            let sourcesHtml = '';
            if (!isUser && sources.length > 0) {
                const displayedSources = sources.slice(0, 3);
                sourcesHtml = `
                    <div class="mt-2 text-xs text-gray-500 border-t border-gray-300 pt-2">
                        <p class="font-semibold mb-1">Ngu·ªìn tr√≠ch d·∫´n:</p>
                        <ul class="space-y-1">
                            ${displayedSources.map((src, i) => `<li><a href="${src.uri}" target="_blank" class="text-blue-600 hover:underline truncate block max-w-full">${i + 1}. ${src.title || src.uri}</a></li>`).join('')}
                        </ul>
                    </div>`;
            }
            
            const formattedText = text
                .replace(/\n/g, '<br>')
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');

            messageDiv.innerHTML = `
                <div class="message-bubble ${isUser ? 'user-message' : 'ai-message'} shadow-md">
                    ${formattedText}
                    ${sourcesHtml}
                </div>`;
            historyElement.appendChild(messageDiv);
        }

        function appendTypingIndicator(historyElement) {
            removeTypingIndicator(); // Ensure no duplicates
            const indicatorDiv = document.createElement('div');
            indicatorDiv.id = 'typing-indicator';
            indicatorDiv.className = 'flex justify-start';
            indicatorDiv.innerHTML = `
                <div class="message-bubble ai-message shadow-md typing-indicator">
                    <span></span><span></span><span></span>
                </div>`;
            historyElement.appendChild(indicatorDiv);
            historyElement.scrollTop = historyElement.scrollHeight;
        }

        function removeTypingIndicator() {
            const indicator = document.getElementById('typing-indicator');
            if (indicator) indicator.remove();
        }
        
        function setupChatbot(mode) {
            const isSearch = mode === 'search';
            if ((isSearch && isSearchChatReady) || (!isSearch && isAdviceChatReady)) return;

            const historyElement = isSearch ? document.getElementById('chat-history') : document.getElementById('advice-chat-history');
            const inputElement = isSearch ? document.getElementById('search-user-input') : document.getElementById('advice-user-input');
            const sendButton = isSearch ? document.getElementById('search-send-btn') : document.getElementById('advice-send-btn');
            const chatHistory = isSearch ? searchChatHistory : adviceChatHistory;
            
            historyElement.innerHTML = '';
            chatHistory.forEach(msg => appendMessage(historyElement, msg.parts[0].text, msg.role));
            historyElement.scrollTop = historyElement.scrollHeight;

            inputElement.disabled = false;
            sendButton.disabled = false;

            const sendMessageHandler = () => {
                const userInput = inputElement.value.trim();
                if (userInput) sendMessageToGemini(userInput, mode);
            };

            sendButton.onclick = null;
            inputElement.onkeypress = null;

            sendButton.addEventListener('click', sendMessageHandler);
            inputElement.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendMessageHandler();
            });

            if (isSearch) isSearchChatReady = true;
            else isAdviceChatReady = true;
        }

        // --- Inspiration Modal Logic ---

        const storyData = {
            thao: {
                title: "Th·∫£o: T·ª´ Blogger ·∫®m Th·ª±c ƒë·∫øn CEO ·ª®ng d·ª•ng n·∫•u ƒÉn", type: "Lƒ©nh v·ª±c: C√¥ng ngh·ªá & ·∫®m th·ª±c | M√£ Holland: ASE",
                content: `<p class="text-gray-700 mb-4">Th·∫£o t·ª´ng h·ªçc Qu·∫£n tr·ªã Kinh doanh v√† c√≥ c√¥ng vi·ªác ·ªïn ƒë·ªãnh. Tuy nhi√™n, ni·ªÅm ƒëam m√™ l·ªõn nh·∫•t c·ªßa c√¥ l√† n·∫•u ƒÉn. C√¥ b·∫Øt ƒë·∫ßu m·ªôt blog ·∫©m th·ª±c v√†o bu·ªïi t·ªëi v√† cu·ªëi tu·∫ßn. Blog nhanh ch√≥ng thu h√∫t ƒë·ªôc gi·∫£, nh∆∞ng Th·∫£o nh·∫≠n ra ng∆∞·ªùi d√πng g·∫∑p kh√≥ khƒÉn trong vi·ªác l∆∞u tr·ªØ c√¥ng th·ª©c v√† l·∫≠p k·∫ø ho·∫°ch th·ª±c ƒë∆°n.</p><p class="text-gray-700 mb-4">Nh·∫≠n th·∫•y ƒë√¢y l√† v·∫•n ƒë·ªÅ c√≥ th·ªÉ gi·∫£i quy·∫øt b·∫±ng c√¥ng ngh·ªá, Th·∫£o tham gia kh√≥a h·ªçc l·∫≠p tr√¨nh ng·∫Øn h·∫°n. D√π kh√≥ khƒÉn, c√¥ d√πng ki·∫øn th·ª©c kinh doanh ƒë·ªÉ ph√°t tri·ªÉn √Ω t∆∞·ªüng ·ª©ng d·ª•ng di ƒë·ªông "B·∫øp th√¥ng minh". Sau khi ngh·ªâ vi·ªác, c√¥ d√†nh to√†n b·ªô th·ªùi gian g·ªçi v·ªën v√† ph√°t tri·ªÉn. ·ª®ng d·ª•ng c·ªßa c√¥ hi·ªán c√≥ h√†ng trƒÉm ngh√¨n ng∆∞·ªùi d√πng.</p><p class="text-gray-700 font-semibold italic">L·ªùi khuy√™n c·ªßa Th·∫£o: "ƒêam m√™ ch·ªâ l√† kh·ªüi ƒë·∫ßu. Quan tr·ªçng l√† b·∫°n ph·∫£i t√¨m ra 'v·∫•n ƒë·ªÅ' m√† ƒëam m√™ ƒë√≥ c√≥ th·ªÉ gi·∫£i quy·∫øt, v√† d√°m h·ªçc h·ªèi k·ªπ nƒÉng m·ªõi ƒë·ªÉ bi·∫øn √Ω t∆∞·ªüng th√†nh hi·ªán th·ª±c."</p>`
            },
            hoang: {
                title: "Ho√†ng: B·ªè K·ªπ thu·∫≠t X√¢y d·ª±ng ƒë·ªÉ theo ƒëu·ªïi Thi·∫øt k·∫ø ƒê·ªì h·ªça", type: "Lƒ©nh v·ª±c: S√°ng t·∫°o | M√£ Holland: AIE",
                content: `<p class="text-gray-700 mb-4">Ho√†ng ƒë∆∞·ª£c ƒë·ªãnh h∆∞·ªõng v√†o ng√†nh K·ªπ thu·∫≠t X√¢y d·ª±ng v√¨ gia ƒë√¨nh tin r·∫±ng ƒë√≥ l√† c√¥ng vi·ªác ·ªïn ƒë·ªãnh. Tuy nhi√™n, sau hai nƒÉm, Ho√†ng c·∫£m th·∫•y ch√°n n·∫£n v√¨ c√¥ng vi·ªác ƒë√≤i h·ªèi s·ª± chi ti·∫øt v√† quy t·∫Øc ch·∫∑t ch·∫Ω, tr√°i ng∆∞·ª£c v·ªõi mong mu·ªën s√°ng t·∫°o c·ªßa c·∫≠u. C·∫≠u d√†nh th·ªùi gian r·∫£nh ƒë·ªÉ t·ª± h·ªçc Photoshop v√† v·∫Ω k·ªπ thu·∫≠t s·ªë.</p><p class="text-gray-700 mb-4">Sau nhi·ªÅu ƒë√™m suy nghƒ©, Ho√†ng quy·∫øt ƒë·ªãnh t·∫°m d·ª´ng vi·ªác h·ªçc ƒë·ªÉ t·∫≠p trung x√¢y d·ª±ng Portfolio thi·∫øt k·∫ø. ƒê√¢y l√† m·ªôt quy·∫øt ƒë·ªãnh r·∫•t kh√≥ khƒÉn, b·ªã nhi·ªÅu ng∆∞·ªùi ph·∫£n ƒë·ªëi. Ho√†ng ph·∫£i l√†m th√™m ƒë·ªÉ trang tr·∫£i chi ph√≠ h·ªçc online. Sau 1 nƒÉm mi·ªát m√†i, Ho√†ng c√≥ m·ªôt b·ªô s∆∞u t·∫≠p t√°c ph·∫©m ƒë·ªß s·ª©c thuy·∫øt ph·ª•c v√† ƒë∆∞·ª£c nh·∫≠n v√†o m·ªôt c√¥ng ty thi·∫øt k·∫ø n·ªïi ti·∫øng.</p><p class="text-gray-700 font-semibold italic">L·ªùi khuy√™n c·ªßa Ho√†ng: "ƒê·ª´ng s·ª£ h√£i khi ph·∫£i l√†m l·∫°i. H√£y d≈©ng c·∫£m l·ª±a ch·ªçn con ƒë∆∞·ªùng khi·∫øn b·∫°n c·∫£m th·∫•y s·ªëng c√≥ √Ω nghƒ©a. Vi·ªác ch·∫•p nh·∫≠n m·∫•t th·ªùi gian ƒë·ªÉ t√¨m l·∫°i ch√≠nh m√¨nh l√† kho·∫£n ƒë·∫ßu t∆∞ t·ªët nh·∫•t."</p>`
            },
            lan: {
                title: "Lan: Mang C√¥ng ngh·ªá v√†o Ru·ªông ƒë·ªìng", type: "Lƒ©nh v·ª±c: N√¥ng nghi·ªáp c√¥ng ngh·ªá | M√£ Holland: RIC",
                content: `<p class="text-gray-700 mb-4">Lan t·ªët nghi·ªáp ng√†nh C√¥ng ngh·ªá Sinh h·ªçc. Thay v√¨ t√¨m vi·ªác ·ªü th√†nh ph·ªë, c√¥ l·∫°i mu·ªën tr·ªü v·ªÅ qu√™ h∆∞∆°ng ƒë·ªÉ ·ª©ng d·ª•ng ki·∫øn th·ª©c khoa h·ªçc v√†o n√¥ng nghi·ªáp. Nhi·ªÅu ng∆∞·ªùi cho r·∫±ng c√¥ ƒëang 'l√£ng ph√≠' t·∫•m b·∫±ng ƒë·∫°i h·ªçc.</p><p class="text-gray-700 mb-4">Lan b·∫Øt ƒë·∫ßu v·ªõi m·ªôt khu v∆∞·ªùn nh·ªè, th·ª≠ nghi·ªám h·ªá th·ªëng t∆∞·ªõi ti√™u t·ª± ƒë·ªông v√† c·∫£m bi·∫øn ƒë·∫•t ƒëai (IoT). C√¥ ghi l·∫°i v√† ph√¢n t√≠ch d·ªØ li·ªáu v·ªÅ ƒë·ªô ·∫©m, dinh d∆∞·ª°ng, √°nh s√°ng. S·ª± k·∫øt h·ª£p gi·ªØa ki·∫øn th·ª©c nghi√™n c·ª©u (Investigative) v√† ·ª©ng d·ª•ng th·ª±c t·∫ø (Realistic) ƒë√£ gi√∫p v∆∞·ªùn rau c·ªßa Lan ƒë·∫°t ch·∫•t l∆∞·ª£ng v√† nƒÉng su·∫•t v∆∞·ª£t tr·ªôi. M√¥ h√¨nh c·ªßa c√¥ sau ƒë√≥ ƒë∆∞·ª£c ch√≠nh quy·ªÅn ƒë·ªãa ph∆∞∆°ng h·ªó tr·ª£ m·ªü r·ªông.</p><p class="text-gray-700 font-semibold italic">L·ªùi khuy√™n c·ªßa Lan: "C√¥ng ngh·ªá kh√¥ng ch·ªâ d√†nh cho th√†nh ph·ªë. Nhu c·∫ßu gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ th·ª±c t·∫ø ·ªü n√¥ng th√¥n l√† r·∫•t l·ªõn. H√£y d√πng t∆∞ duy khoa h·ªçc ƒë·ªÉ t·∫°o ra gi√° tr·ªã b·ªÅn v·ªØng."</p>`
            }
        };

        function showStoryModal(storyKey) {
            const story = storyData[storyKey];
            const modal = document.getElementById('storyModal');
            const contentDiv = document.getElementById('modal-story-content');
            contentDiv.innerHTML = `
                <h2 class="text-3xl font-bold text-gray-900 mb-2">${story.title}</h2>
                <p class="text-md text-indigo-600 mb-6 font-medium">${story.type}</p>
                <div class="text-base leading-relaxed">${story.content}</div>`;
            modal.style.display = 'block';
        }

        function closeStoryModal() {
            document.getElementById('storyModal').style.display = 'none';
        }
        
        // --- Admissions Logic ---

        const admissionsData = {
            forms: `<h3 class="text-2xl font-bold text-indigo-700 mb-4">C√°c h√¨nh th·ª©c tuy·ªÉn sinh ph·ªï bi·∫øn (2025)</h3><ul class="list-disc pl-5 space-y-3 text-gray-700"><li><strong>X√©t tuy·ªÉn theo k·∫øt qu·∫£ thi T·ªët nghi·ªáp THPT:</strong> Ph∆∞∆°ng th·ª©c truy·ªÅn th·ªëng, chi·∫øm t·ª∑ tr·ªçng l·ªõn nh·∫•t.</li><li><strong>X√©t tuy·ªÉn theo H·ªçc b·∫°:</strong> D·ª±a tr√™n ƒëi·ªÉm trung b√¨nh c√°c m√¥n c·ªßa c·∫•p THPT.</li><li><strong>X√©t tuy·ªÉn b·∫±ng k·ª≥ thi ƒê√°nh gi√° nƒÉng l·ª±c (ƒêGNL):</strong> Do c√°c ƒë·∫°i h·ªçc Qu·ªëc gia ho·∫∑c tr∆∞·ªùng l·ªõn t·ªï ch·ª©c.</li><li><strong>X√©t tuy·ªÉn th·∫≥ng v√† ∆∞u ti√™n x√©t tuy·ªÉn:</strong> D√†nh cho h·ªçc sinh gi·ªèi qu·ªëc gia, qu·ªëc t·∫ø.</li><li><strong>X√©t tuy·ªÉn k·∫øt h·ª£p:</strong> K·∫øt h·ª£p ch·ª©ng ch·ªâ qu·ªëc t·∫ø (IELTS, SAT) v·ªõi ƒëi·ªÉm thi THPT ho·∫∑c h·ªçc b·∫°.</li></ul><p class="mt-4 text-sm text-gray-500 italic">L·ªùi khuy√™n: Th√≠ sinh n√™n ƒëƒÉng k√Ω t·ª´ 2-3 ph∆∞∆°ng th·ª©c ƒë·ªÉ t·ªëi ƒëa h√≥a c∆° h·ªôi.</p>`,
            universities: `<h3 class="text-2xl font-bold text-indigo-700 mb-4">C√°c nh√≥m tr∆∞·ªùng ƒê·∫°i h·ªçc tr·ªçng ƒëi·ªÉm</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="p-4 bg-white rounded-lg border"><h4 class="font-bold text-lg">ƒê·∫°i h·ªçc Qu·ªëc gia</h4><p class="text-gray-600">ƒêHQG H√† N·ªôi, ƒêHQG TP.HCM: ƒê√†o t·∫°o ƒëa ng√†nh, ch·∫•t l∆∞·ª£ng h√†ng ƒë·∫ßu.</p></div><div class="p-4 bg-white rounded-lg border"><h4 class="font-bold text-lg">Kh·ªëi K·ªπ thu·∫≠t</h4><p class="text-gray-600">ƒêH B√°ch Khoa, ƒêH S∆∞ ph·∫°m K·ªπ thu·∫≠t: T·∫≠p trung ƒë√†o t·∫°o K·ªπ thu·∫≠t, C√¥ng ngh·ªá.</p></div><div class="p-4 bg-white rounded-lg border"><h4 class="font-bold text-lg">Kh·ªëi Kinh t·∫ø</h4><p class="text-gray-600">ƒêH Kinh t·∫ø Qu·ªëc d√¢n, ƒêH Ngo·∫°i th∆∞∆°ng: Chuy√™n s√¢u v·ªÅ Kinh doanh, T√†i ch√≠nh.</p></div><div class="p-4 bg-white rounded-lg border"><h4 class="font-bold text-lg">Kh·ªëi S·ª©c kh·ªèe</h4><p class="text-gray-600">ƒêH Y H√† N·ªôi, ƒêH Y D∆∞·ª£c TP.HCM: Chuy√™n v·ªÅ Y khoa, D∆∞·ª£c, ƒêi·ªÅu d∆∞·ª°ng.</p></div></div>`,
            news: `<h3 class="text-2xl font-bold text-indigo-700 mb-4">Tin t·ª©c Tuy·ªÉn sinh (M√¥ ph·ªèng 2025)</h3><ul class="list-disc pl-5 space-y-3 text-gray-700"><li><strong>15/05/2025:</strong> C√°c tr∆∞·ªùng c√¥ng b·ªë ng∆∞·ª°ng ƒëi·ªÉm nh·∫≠n h·ªì s∆° x√©t tuy·ªÉn b·∫±ng ƒëi·ªÉm thi ƒêGNL.</li><li><strong>01/06/2025:</strong> K·∫øt th√∫c nh·∫≠n h·ªì s∆° x√©t tuy·ªÉn H·ªçc b·∫° ƒë·ª£t 1.</li><li><strong>10/07/2025:</strong> B·ªô GD&ƒêT c√¥ng b·ªë l·ªãch thi v√† quy ch·∫ø chi ti·∫øt k·ª≥ thi T·ªët nghi·ªáp THPT.</li></ul><p class="mt-4 text-sm text-red-500 font-semibold">L∆∞u √Ω: Th√¥ng tin tr√™n mang t√≠nh ch·∫•t m√¥ ph·ªèng, vui l√≤ng ki·ªÉm tra th√¥ng b√°o ch√≠nh th·ª©c.</p>`,
            scholarships: `<h3 class="text-2xl font-bold text-indigo-700 mb-4">C√°c lo·∫°i H·ªçc b·ªïng ph·ªï bi·∫øn</h3><ul class="list-disc pl-5 space-y-3 text-gray-700"><li><strong>H·ªçc b·ªïng Khuy·∫øn kh√≠ch H·ªçc t·∫≠p:</strong> D√†nh cho sinh vi√™n c√≥ th√†nh t√≠ch h·ªçc t·∫≠p xu·∫•t s·∫Øc.</li><li><strong>H·ªçc b·ªïng ƒê·∫ßu v√†o:</strong> D·ª±a tr√™n ƒëi·ªÉm thi THPT cao, ho·∫∑c th√†nh t√≠ch thi ƒêGNL/ch·ª©ng ch·ªâ qu·ªëc t·∫ø.</li><li><strong>H·ªçc b·ªïng Doanh nghi·ªáp:</strong> Do c√°c c√¥ng ty, t·∫≠p ƒëo√†n t√†i tr·ª£ (v√≠ d·ª•: FPT, Viettel, Samsung).</li><li><strong>H·ªçc b·ªïng Ch√≠nh ph·ªß:</strong> D√†nh cho c√°c ch∆∞∆°ng tr√¨nh trao ƒë·ªïi sinh vi√™n qu·ªëc t·∫ø ho·∫∑c du h·ªçc.</li></ul><p class="mt-4 text-sm text-gray-500 italic">M·∫πo: Ch·ªß ƒë·ªông t√¨m ki·∫øm th√¥ng tin h·ªçc b·ªïng tr√™n website ch√≠nh th·ª©c c·ªßa tr∆∞·ªùng.</p>`
        };

        function showAdmissionsContent(key) {
            const displayElement = document.getElementById('admissions-content-display');
            displayElement.innerHTML = admissionsData[key] || '';
            document.querySelectorAll('.admissions-nav-btn').forEach(btn => {
                const isActive = btn.getAttribute('data-key') === key;
                btn.classList.toggle('bg-indigo-600', isActive);
                btn.classList.toggle('text-white', isActive);
                btn.classList.toggle('bg-indigo-100', !isActive);
                btn.classList.toggle('text-indigo-800', !isActive);
            });
        }
        
        // --- Exam Library Logic (THI TH·ª¨) ---

        function linkToAzota(type) {
            let title = "Th√¥ng b√°o Thi th·ª≠";
            let message = "B·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn trang thi th·ª≠ m√¥ ph·ªèng tr√™n n·ªÅn t·∫£ng Azota. Ch√∫c b·∫°n l√†m b√†i t·ªët!";

            if (type === 'thpt_official') {
                const yearSelect = document.getElementById('official-exam-year');
                const subjectSelect = document.getElementById('official-exam-subject');
                const year = yearSelect.value;
                const subjectText = subjectSelect.options[subjectSelect.selectedIndex].text;

                if (!year || !subjectSelect.value) {
                    showCustomModal("L·ªói", "Vui l√≤ng ch·ªçn ƒë·∫ßy ƒë·ªß NƒÉm thi v√† B√†i thi/M√¥n thi.");
                    return;
                }
                message = `B·∫°n ƒë√£ ch·ªçn thi th·ª≠ ƒê·ªÅ ch√≠nh th·ª©c nƒÉm ${year}, m√¥n ${subjectText}. H·ªá th·ªëng ƒëang chu·∫©n b·ªã ƒë·ªÅ...`;
            } else if (type === 'thpt_new') {
                 message = `B·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn ng√¢n h√†ng ƒë·ªÅ thi th·ª≠ m·ªõi nh·∫•t t·ª´ c√°c S·ªü GD. Ch√∫c b·∫°n luy·ªán t·∫≠p hi·ªáu qu·∫£!`;
            } else if (type === 'dgnl') {
                message = `B·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn khu v·ª±c luy·ªán thi ƒê√°nh gi√° NƒÉng l·ª±c. H√£y s·∫µn s√†ng cho c√°c c√¢u h·ªèi t∆∞ duy!`;
            }
            
            showCustomModal(title, message + " (ƒê√¢y l√† t√≠nh nƒÉng m√¥ ph·ªèng)");
        }
        
        // --- Custom Modal ---
        
        function showCustomModal(title, message) {
            document.getElementById('customAlertTitle').textContent = title;
            document.getElementById('customAlertMessage').innerHTML = message;
            document.getElementById('customAlertModal').style.display = 'block';
        }

        // --- Visitor Counter Logic (Local Storage Fallback) ---
        function updateVisitorCount() {
            let count = localStorage.getItem('visitorCount');
            if (count === null) {
                count = 1;
            } else {
                count = parseInt(count) + 1;
            }
            localStorage.setItem('visitorCount', count);
            const countElement = document.getElementById('visitor-count');
            if (countElement) {
                countElement.textContent = count.toLocaleString('vi-VN');
            }
        }

        window.onclick = function(event) {
            const storyModal = document.getElementById('storyModal');
            const alertModal = document.getElementById('customAlertModal');
            if (event.target == storyModal) closeStoryModal();
            if (event.target == alertModal) alertModal.style.display = 'none';
        }

        // --- Initialization ---

        window.onload = function() {
            showPage('home');
            updateVisitorCount(); // Fallback visitor counter
            APITestEngine.initialize();
        };
    </script>
<script>
  // --- Theo d√µi IP ng∆∞·ªùi truy c·∫≠p ---
  async function logVisitorIP() {
    try {
      const response = await fetch('https://api.ipify.org?format=json');
      const data = await response.json();
      const ip = data.ip;
      const time = new Date().toLocaleString();
      console.log(`üëÅÔ∏è L∆∞·ª£t truy c·∫≠p m·ªõi | IP: ${ip} | Th·ªùi gian: ${time}`);
      localStorage.setItem('lastVisitIP', ip);
      localStorage.setItem('lastVisitTime', time);
    } catch (err) {
      console.warn('Kh√¥ng th·ªÉ l·∫•y IP ng∆∞·ªùi d√πng:', err);
    }
  }
  window.addEventListener('load', logVisitorIP);
</script>
</body>
</html>

